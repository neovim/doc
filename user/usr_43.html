  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Neovim user documentation">

    <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
    <link rel="preconnect" href="https://X185E15FPG-dsn.algolia.net" crossorigin />

    <link href="/css/normalize.min.css" rel="stylesheet">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="help.css" rel="stylesheet">
    <link href="/highlight/styles/neovim.min.css" rel="stylesheet">

    <script src="/highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <title> Usr_43 - Neovim docs</title>
  </head>
  <body>
    <header class="container">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a href="/" class="navbar-brand" aria-label="logo">
          <!--TODO: use <img src="â€¦.svg"> here instead. Need one that has green lettering instead of gray. -->
              <svg xmlns="http://www.w3.org/2000/svg" role="img" width="173" height="50" viewBox="0 0 742 214" aria-label="Neovim">
      <title>Neovim</title>
      <defs>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
          <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
          <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
          <stop stop-color="#7DB643" offset="0%" />
          <stop stop-color="#367533" offset="100%" />
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
          <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
          <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
        </linearGradient>
      </defs>
      <g fill="none" fill-rule="evenodd">
        <path
          d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z"
          fill="url(#a)"
          transform="translate(1 1)"
        />
        <path
          d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z"
          fill="url(#b)"
          transform="matrix(-1 0 0 1 305 1)"
        />
        <path
          d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z"
          fill="url(#c)"
          transform="translate(1 1)"
        />
        <path
          d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
          fill-opacity=".13"
          fill="#000"
        />
        <g fill="#444">
          <path
            d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
            fill="currentColor"
          />
          <path
            d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
            fill="currentColor"
            fill-opacity=".8"
          />
        </g>
      </g>
    </svg>
  
          <!--<img src="https://neovim.io/logos/neovim-logo.svg" width="173" height="50" alt="Neovim" />-->
        </a>
        <div id="docsearch"></div> <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
      </div>
    </nav>
  </header>

  <div class="container golden-grid help-body">
  <div class="col-wide">
  <a name="43.1"></a><h1 id="usr_43.txt"> Usr_43</h1>
  <p>
    <i>
    Nvim <code>:help</code> pages, <a href="https://github.com/neovim/neovim/blob/master/scripts/gen_help_html.lua">generated</a>
    from <a href="https://github.com/neovim/neovim/blob/master/runtime/doc/usr_43.txt">source</a>
    using the <a href="https://github.com/neovim/tree-sitter-vimdoc">tree-sitter-vimdoc</a> parser.
    </i>
  </p>
  <hr/>
  <div class="old-help-para">		     VIM USER MANUAL - by Bram Moolenaar</div>
<div class="old-help-para">			       Using filetypes</div>
<div class="old-help-para">When you are editing a file of a certain type, for example a C program or a
shell script, you often use the same option settings and mappings.  You
quickly get tired of manually setting these each time.  This chapter explains
how to do it automatically.</div>
<div class="old-help-para"><a href="usr_43.html#43.1">43.1</a>  	Plugins for a filetype
<a href="usr_43.html#43.2">43.2</a>  	Adding a filetype</div>
<div class="old-help-para">     Next chapter: <a href="usr_44.html#usr_44.txt">usr_44.txt</a>  Your own syntax highlighted
 Previous chapter: <a href="usr_42.html#usr_42.txt">usr_42.txt</a>  Add new menus
Table of contents: <a href="usr_toc.html#usr_toc.txt">usr_toc.txt</a></div>
<div class="old-help-para"><h2 id="43.1" class="help-heading">	Plugins for a filetype<span class="help-heading-tags">				<span class="help-tag"><a href="#filetype-plugin">filetype-plugin</a></span></h2></div>
<div class="old-help-para">How to start using filetype plugins has already been discussed here:
<a href="usr_05.html#add-filetype-plugin">add-filetype-plugin</a>.  But you probably are not satisfied with the default
settings, because they have been kept minimal.  Suppose that for C files you
want to set the <a href="options.html#'softtabstop'">'softtabstop'</a> option to 4 and define a mapping to insert a
three-line comment.  You do this with only two steps:</div>
<div class="old-help-para">							<code id="your-runtime-dir" class="help-tag-right"><a href="#your-runtime-dir">your-runtime-dir</a></code>
1. Create your own runtime directory.  On Unix this usually is
   "~/.config/nvim".  In this directory create the "ftplugin" directory:<pre>mkdir -p ~/.config/nvim/ftplugin</pre></div>
<div class="old-help-para">   When you are not on Unix, check the value of the <a href="options.html#'runtimepath'">'runtimepath'</a> option to
   see where Vim will look for the "ftplugin" directory:<pre>set runtimepath?</pre></div>
<div class="old-help-para">  You would normally use the first directory name (before the first comma).
   You might want to prepend a directory name to the <a href="options.html#'runtimepath'">'runtimepath'</a> option in
   your <a href="starting.html#init.vim">init.vim</a> file if you don't like the default value.</div>
<div class="old-help-para">2. Create the file "~/.config/nvim/ftplugin/c.vim", with the contents:<pre>setlocal softtabstop=4
noremap &lt;buffer&gt; &lt;LocalLeader&gt;c o/**************&lt;CR&gt;&lt;CR&gt;/&lt;Esc&gt;
let b:undo_ftplugin = "setl softtabstop&lt; | unmap &lt;buffer&gt; &lt;LocalLeader&gt;c"</pre>
Try editing a C file.  You should notice that the <a href="options.html#'softtabstop'">'softtabstop'</a> option is set
to 4.  But when you edit another file it's reset to the default zero.  That is
because the ":setlocal" command was used.  This sets the <a href="options.html#'softtabstop'">'softtabstop'</a> option
only locally to the buffer.  As soon as you edit another buffer, it will be
set to the value set for that buffer.  For a new buffer it will get the
default value or the value from the last ":set" command.</div>
<div class="old-help-para">Likewise, the mapping for "\c" will disappear when editing another buffer.
The ":map <code>&lt;buffer&gt;</code>" command creates a mapping that is local to the current
buffer.  This works with any mapping command: ":map!", ":vmap", etc.  The
<a href="map.html#%3CLocalLeader%3E">&lt;LocalLeader&gt;</a> in the mapping is replaced with the value of the
"maplocalleader" variable.</div>
<div class="old-help-para">The line to set b:undo_ftplugin is for when the filetype is set to another
value.  In that case you will want to undo your preferences.  The
b:undo_ftplugin variable is executed as a command. Watch out for characters
with a special meaning inside a string, such as a backslash.</div>
<div class="old-help-para">You can find examples for filetype plugins in this directory:<pre>$VIMRUNTIME/ftplugin/</pre>
More details about writing a filetype plugin can be found here:
<a href="usr_41.html#write-plugin">write-plugin</a>.</div>
<div class="old-help-para"><h2 id="43.2" class="help-heading"><span class="help-heading-tags"><span class="help-tag"><a href="#43.2">43.2</a></span>	Adding a filetype</h2></div>
<div class="old-help-para">If you are using a type of file that is not recognized by Vim, this is how to
get it recognized.  You need a runtime directory of your own.  See
<a href="usr_43.html#your-runtime-dir">your-runtime-dir</a> above.</div>
<div class="old-help-para">Create a file "filetype.vim" which contains an autocommand for your filetype.
(Autocommands were explained in section <a href="usr_40.html#40.3">40.3</a>.)  Example:<pre>augroup filetypedetect
au BufNewFile,BufRead *.xyz        setf xyz
augroup END</pre>
This will recognize all files that end in ".xyz" as the "xyz" filetype.  The
":augroup" commands put this autocommand in the "filetypedetect" group.  This
allows removing all autocommands for filetype detection when doing ":filetype
off".  The "setf" command will set the <a href="options.html#'filetype'">'filetype'</a> option to its argument,
unless it was set already.  This will make sure that <a href="options.html#'filetype'">'filetype'</a> isn't set
twice.</div>
<div class="old-help-para">You can use many different patterns to match the name of your file.  Directory
names can also be included.  See <a href="autocmd.html#autocmd-pattern">autocmd-pattern</a>.  For example, the files
under "/usr/share/scripts/" are all "ruby" files, but don't have the expected
file name extension.  Adding this to the example above:<pre>augroup filetypedetect
au BufNewFile,BufRead *.xyz                        setf xyz
au BufNewFile,BufRead /usr/share/scripts/*        setf ruby
augroup END</pre>
However, if you now edit a file /usr/share/scripts/README.txt, this is not a
ruby file.  The danger of a pattern ending in "*" is that it quickly matches
too many files.  To avoid trouble with this, put the filetype.vim file in
another directory, one that is at the end of <a href="options.html#'runtimepath'">'runtimepath'</a>.  For Unix for
example, you could use "~/.config/nvim/after/filetype.vim".
   You now put the detection of text files in ~/.config/nvim/filetype.vim:<pre>augroup filetypedetect
au BufNewFile,BufRead *.txt                        setf text
augroup END</pre>
That file is found in <a href="options.html#'runtimepath'">'runtimepath'</a> first.  Then use this in
~/.config/nvim/after/filetype.vim, which is found last:<pre>augroup filetypedetect
au BufNewFile,BufRead /usr/share/scripts/*        setf ruby
augroup END</pre>
What will happen now is that Vim searches for "filetype.vim" files in each
directory in <a href="options.html#'runtimepath'">'runtimepath'</a>.  First ~/.config/nvim/filetype.vim is found.  The
autocommand to catch <code>*.txt</code> files is defined there.  Then Vim finds the
filetype.vim file in $VIMRUNTIME, which is halfway <a href="options.html#'runtimepath'">'runtimepath'</a>.  Finally
~/.config/nvim/after/filetype.vim is found and the autocommand for detecting
ruby files in /usr/share/scripts is added.
   When you now edit /usr/share/scripts/README.txt, the autocommands are
checked in the order in which they were defined.  The <code>*.txt</code> pattern matches,
thus "setf text" is executed to set the filetype to "text".  The pattern for
ruby matches too, and the "setf ruby" is executed.  But since <a href="options.html#'filetype'">'filetype'</a> was
already set to "text", nothing happens here.
   When you edit the file /usr/share/scripts/foobar the same autocommands are
checked.  Only the one for ruby matches and "setf ruby" sets <a href="options.html#'filetype'">'filetype'</a> to
ruby.</div>
<div class="old-help-para"><h3 id="_recognizing-by-contents" class="help-heading">RECOGNIZING BY CONTENTS</h3></div>
<div class="old-help-para">If your file cannot be recognized by its file name, you might be able to
recognize it by its contents.  For example, many script files start with a
line like:</div>
<div class="old-help-para"><div class="help-column_heading">	#!/bin/xyz</div></div>
<div class="old-help-para">To recognize this script create a file "scripts.vim" in your runtime directory
(same place where filetype.vim goes).  It might look like this:<pre>if did_filetype()
  finish
endif
if getline(1) =~ '^#!.*[/\\]xyz\&gt;'
  setf xyz
endif</pre>
The first check with did_filetype() is to avoid that you will check the
contents of files for which the filetype was already detected by the file
name.  That avoids wasting time on checking the file when the "setf" command
won't do anything.
   The scripts.vim file is sourced by an autocommand in the default
filetype.vim file.  Therefore, the order of checks is:</div>
<div class="old-help-para">	1. filetype.vim files before $VIMRUNTIME in <a href="options.html#'runtimepath'">'runtimepath'</a>
	2. first part of $VIMRUNTIME/filetype.vim
	3. all scripts.vim files in <a href="options.html#'runtimepath'">'runtimepath'</a>
	4. remainder of $VIMRUNTIME/filetype.vim
	5. filetype.vim files after $VIMRUNTIME in <a href="options.html#'runtimepath'">'runtimepath'</a></div>
<div class="old-help-para">If this is not sufficient for you, add an autocommand that matches all files
and sources a script or executes a function to check the contents of the file.</div>
<div class="old-help-para"><h2 id="_-" class="help-heading"></h2>Next chapter: <a href="usr_44.html#usr_44.txt">usr_44.txt</a>  Your own syntax highlighted</div>
<div class="old-help-para">Copyright: see <a href="usr_01.html#manual-copyright">manual-copyright</a>  vim:tw=78:ts=8:noet:ft=help:norl:</div>

  </div>
      <div class="col-narrow toc">
      <div><a href="index.html">Main</a></div>
      <div><a href="vimindex.html">Commands index</a></div>
      <div><a href="quickref.html">Quick reference</a></div>
      <hr/>
  <div class="help-toc-h1"><a href="#43.1">
</a>
</div><div class="help-toc-h1"><a href="#43.2">
	Adding a filetype</a>
<div class="help-toc-h2"><a href="#_recognizing-by-contents">RECOGNIZING BY CONTENTS</a></div>
</div><div class="help-toc-h1"><a href="#_-">
</a>
</div></div>
</div>
  <footer>
    <div class="container flex">
      <div class="generator-stats">
        Generated at 2023-10-01 05:26 from <code><a href="https://github.com/neovim/neovim/commit/248305cf377de6710daa89a92eb8605fa5dcbb1f">248305c</a></code>
      </div>
      <div class="generator-stats">
      parse_errors: 0 (<a href="https://github.com/neovim/neovim/issues/new?labels=bug&title=user+docs+HTML%3A+usr_43.txt+&body=%60gen_help_html.lua%60+problem+at%3A+https://neovim.io/doc/user/usr_43.html%0D%0DContext%3A%0D%0D%60%60%60%0DTODO%0D%60%60%60" target="_blank">report docs bug...</a>) | <span title="	Nvim">noise_lines: 1</span>
      </div>
    <div>

    <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script type="module">
      docsearch({
        container: '#docsearch',
        appId: 'X185E15FPG',
        apiKey: 'b5e6b2f9c636b2b471303205e59832ed',
        indexName: 'nvim',
      });
    </script>

  </footer>
  </body>
</html>
