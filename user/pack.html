  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Neovim user documentation">

    <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
    <link rel="preconnect" href="https://X185E15FPG-dsn.algolia.net" crossorigin />

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="help.css" rel="stylesheet">
    <link href="/highlight/styles/neovim.min.css" rel="stylesheet">

    <script src="/highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <title> Pack - Neovim docs</title>
  </head>
  <body>
    <header class="container">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a href="/" class="navbar-brand" aria-label="logo">
          <!--TODO: use <img src="â€¦.svg"> here instead. Need one that has green lettering instead of gray. -->
              <svg xmlns="http://www.w3.org/2000/svg" role="img" width="173" height="50" viewBox="0 0 742 214" aria-label="Neovim">
      <title>Neovim</title>
      <defs>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
          <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
          <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
          <stop stop-color="#7DB643" offset="0%" />
          <stop stop-color="#367533" offset="100%" />
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
          <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
          <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
        </linearGradient>
      </defs>
      <g fill="none" fill-rule="evenodd">
        <path
          d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z"
          fill="url(#a)"
          transform="translate(1 1)"
        />
        <path
          d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z"
          fill="url(#b)"
          transform="matrix(-1 0 0 1 305 1)"
        />
        <path
          d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z"
          fill="url(#c)"
          transform="translate(1 1)"
        />
        <path
          d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
          fill-opacity=".13"
          fill="#000"
        />
        <g fill="#444">
          <path
            d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
            fill="currentColor"
          />
          <path
            d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
            fill="currentColor"
            fill-opacity=".8"
          />
        </g>
      </g>
    </svg>
  
          <!--<img src="https://neovim.io/logos/neovim-logo.svg" width="173" height="50" alt="Neovim" />-->
        </a>
        <div id="docsearch"></div> <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
      </div>
    </nav>
  </header>

  <div class="container golden-grid help-body">
  <div class="col-wide">
  <a name="pack.txt" href="#packages"><h1 id="packages"> Pack</h1></a>
  <p>
    <i>
    Nvim <code>:help</code> pages, <a href="https://github.com/neovim/neovim/blob/master/src/gen/gen_help_html.lua">generated</a>
    from <a href="https://github.com/neovim/neovim/blob/master/runtime/doc/pack.txt">source</a>
    using the <a href="https://github.com/neovim/tree-sitter-vimdoc">tree-sitter-vimdoc</a> parser.
    </i>
  </p>
  <hr/>
  <div class="help-para">
                                Extending Nvim

</div>
<div class="help-para">
<h2 id="_using-vim-packages" class="help-heading">Using Vim packages</h2>


</div>
<div class="help-para">
A Vim "package" is a directory that contains <a href="usr_05.html#plugin">plugin</a>s.  Compared to normal
plugins, a package can...
<div class="help-li" style=""> be downloaded as an archive and unpacked in its own directory, so the files
  are not mixed with files of other plugins.
</div><div class="help-li" style=""> be a git, mercurial, etc. repository, thus easy to update.
</div><div class="help-li" style=""> contain multiple plugins that depend on each other.
</div><div class="help-li" style=""> contain plugins that are automatically loaded on startup ("start" packages,
  located in "pack/*/start/*") and ones that are only loaded when needed with
  <a href="repeat.html#%3Apackadd">:packadd</a> ("opt" packages, located in "pack/*/opt/*").
</div>
</div>
<div class="help-para">
                                                        <span id="runtime-search-path" class="help-tag-right"><a href="#runtime-search-path">runtime-search-path</a></span><br>
Nvim searches for <a href="repeat.html#%3Aruntime">:runtime</a> files in:
<div class="help-li" style=""> 1. all paths in <a href="options.html#'runtimepath'">'runtimepath'</a>
</div><div class="help-li" style=""> 2. all "pack/*/start/*" dirs
</div>
</div>
<div class="help-para">
Note that the "pack/*/start/*" paths are not explicitly included in
<a href="options.html#'runtimepath'">'runtimepath'</a>, so they will not be reported by ":set rtp" or "echo &amp;rtp".
Scripts can use <a href="api.html#nvim_list_runtime_paths()">nvim_list_runtime_paths()</a> to list all used directories, and
<a href="api.html#nvim_get_runtime_file()">nvim_get_runtime_file()</a> to query for specific files or sub-folders within
the runtime path. Example:<pre>" List all runtime dirs and packages with Lua paths.
:echo nvim_get_runtime_file("lua/", v:true)</pre>
<div class="help-column_heading">Using a package and loading automatically</div>

</div>
<div class="help-para">
Let's assume your Nvim files are in "~/.local/share/nvim/site" and you want to
add a package from a zip archive "/tmp/foopack.zip":<pre>% mkdir -p ~/.local/share/nvim/site/pack/foo
% cd ~/.local/share/nvim/site/pack/foo
% unzip /tmp/foopack.zip</pre>
The directory name "foo" is arbitrary, you can pick anything you like.

</div>
<div class="help-para">
You would now have these files under ~/.local/share/nvim/site:<pre>pack/foo/README.txt
pack/foo/start/foobar/plugin/foo.vim
pack/foo/start/foobar/syntax/some.vim
pack/foo/opt/foodebug/plugin/debugger.vim</pre>
On startup after processing your <a href="starting.html#config">config</a>, Nvim scans all directories in
<a href="options.html#'packpath'">'packpath'</a> for plugins in "pack/*/start/*", then loads the plugins.

</div>
<div class="help-para">
To allow for calling into package functionality while parsing your <a href="starting.html#vimrc">vimrc</a>,
<a href="syntax.html#%3Acolorscheme">:colorscheme</a> and <a href="userfunc.html#autoload">autoload</a> will both automatically search under <a href="options.html#'packpath'">'packpath'</a>
as well in addition to <a href="options.html#'runtimepath'">'runtimepath'</a>.  See the documentation for each for
details.

</div>
<div class="help-para">
In the example Nvim will find "pack/foo/start/foobar/plugin/foo.vim" and load
it.

</div>
<div class="help-para">
If the "foobar" plugin kicks in and sets the <a href="options.html#'filetype'">'filetype'</a> to "some", Nvim will
find the syntax/some.vim file, because its directory is in the runtime search
path.

</div>
<div class="help-para">
Nvim will also load ftdetect files, if there are any.

</div>
<div class="help-para">
Note that the files under "pack/foo/opt" are not loaded automatically, only
the ones under "pack/foo/start".  See <a href="pack.html#pack-add">pack-add</a> below for how the "opt"
directory is used.

</div>
<div class="help-para">
Loading packages automatically will not happen if loading plugins is disabled,
see <a href="starting.html#load-plugins">load-plugins</a>.

</div>
<div class="help-para">
To load packages earlier, so that plugin/ files are sourced:
    :packloadall
This also works when loading plugins is disabled.  The automatic loading will
only happen once.

</div>
<div class="help-para">
If the package has an "after" directory, that directory is added to the end of
<a href="options.html#'runtimepath'">'runtimepath'</a>, so that anything there will be loaded later.

</div>
<div class="help-para">
<div class="help-column_heading">Using a single plugin and loading it automatically</div>

</div>
<div class="help-para">
If you don't have a package but a single plugin, you need to create the extra
directory level:<pre>% mkdir -p ~/.local/share/nvim/site/pack/foo/start/foobar
% cd ~/.local/share/nvim/site/pack/foo/start/foobar
% unzip /tmp/someplugin.zip</pre>
You would now have these files:<pre>pack/foo/start/foobar/plugin/foo.vim
pack/foo/start/foobar/syntax/some.vim</pre>
From here it works like above.

</div>
<div class="help-para">
<div class="help-column_heading">Optional plugins</div>
                                                        <span id="pack-add" class="help-tag-right"><a href="#pack-add">pack-add</a></span><br>
To load an optional plugin from a pack use the <code>:packadd</code> command:<pre>:packadd foodebug</pre>
This searches for "pack/*/opt/foodebug" in <a href="options.html#'packpath'">'packpath'</a> and will find
~/.local/share/nvim/site/pack/foo/opt/foodebug/plugin/debugger.vim and source
it.

</div>
<div class="help-para">
This could be done if some conditions are met.  For example, depending on
whether Nvim supports a feature or a dependency is missing.

</div>
<div class="help-para">
You can also load an optional plugin at startup, by putting this command in
your <a href="starting.html#config">config</a>:<pre>:packadd! foodebug</pre>
The extra "!" is so that the plugin isn't loaded if Nvim was started with
<a href="starting.html#--noplugin">--noplugin</a>.

</div>
<div class="help-para">
It is perfectly normal for a package to only have files in the "opt"
directory.  You then need to load each plugin when you want to use it.

</div>
<div class="help-para">
<div class="help-column_heading">Where to put what</div>

</div>
<div class="help-para">
Since color schemes, loaded with <code>:colorscheme</code>, are found below
"pack/*/start" and "pack/*/opt", you could put them anywhere.  We recommend
you put them below "pack/*/opt", for example
"~/.config/nvim/pack/mycolors/opt/dark/colors/very_dark.vim".

</div>
<div class="help-para">
Filetype plugins should go under "pack/*/start", so that they are always
found.  Unless you have more than one plugin for a file type and want to
select which one to load with <code>:packadd</code>.  E.g. depending on the compiler
version:<pre>if foo_compiler_version &gt; 34
  packadd foo_new
else
  packadd foo_old
endif</pre>
The "after" directory is most likely not useful in a package.  It's not
disallowed though.

</div>
<div class="help-para">
<h2 id="_creating-vim-packages" class="help-heading">Creating Vim packages<span class="help-heading-tags">                                   <span id="package-create" class="help-tag"><a href="#package-create">package-create</a></span></h2>


</div>
<div class="help-para">
This assumes you write one or more plugins that you distribute as a package.

</div>
<div class="help-para">
If you have two unrelated plugins you would use two packages, so that Vim
users can choose what they include or not.  Or you can decide to use one
package with optional plugins, and tell the user to add the preferred ones
with <code>:packadd</code>.

</div>
<div class="help-para">
Decide how you want to distribute the package.  You can create an archive or
you could use a repository.  An archive can be used by more users, but is a
bit harder to update to a new version.  A repository can usually be kept
up-to-date easily, but it requires a program like "git" to be available.
You can do both, github can automatically create an archive for a release.

</div>
<div class="help-para">
Your directory layout would be like this:<pre>start/foobar/plugin/foo.vim          " always loaded, defines commands
start/foobar/plugin/bar.vim          " always loaded, defines commands
start/foobar/autoload/foo.vim        " loaded when foo command used
start/foobar/doc/foo.txt             " help for foo.vim
start/foobar/doc/tags                " help tags
opt/fooextra/plugin/extra.vim        " optional plugin, defines commands
opt/fooextra/autoload/extra.vim      " loaded when extra command used
opt/fooextra/doc/extra.txt           " help for extra.vim
opt/fooextra/doc/tags                " help tags</pre>

</div>
<div class="help-para">
This allows for the user to do:<pre>mkdir ~/.local/share/nvim/site/pack
cd ~/.local/share/nvim/site/pack
git clone https://github.com/you/foobar.git myfoobar</pre>
Here "myfoobar" is a name that the user can choose, the only condition is that
it differs from other packages.

</div>
<div class="help-para">
In your documentation you explain what the plugins do, and tell the user how
to load the optional plugin:<pre>:packadd! fooextra</pre>
You could add this packadd command in one of your plugins, to be executed when
the optional plugin is needed.

</div>
<div class="help-para">
Run the <code>:helptags</code> command to generate the doc/tags file.  Including this
generated file in the package means that the user can drop the package in the
pack directory and the help command works right away.  Don't forget to re-run
the command after changing the plugin help:<pre>:helptags path/start/foobar/doc
:helptags path/opt/fooextra/doc</pre>
<div class="help-column_heading">Dependencies between plugins</div>
                                                        <span id="packload-two-steps" class="help-tag-right"><a href="#packload-two-steps">packload-two-steps</a></span><br>
Suppose you have two plugins that depend on the same functionality.  You can
put the common functionality in an autoload directory, so that it will be
found automatically.  Your package would have these files:

</div>
<div class="help-para">
pack/foo/start/one/plugin/one.vim<pre>call foolib#getit()</pre>
pack/foo/start/two/plugin/two.vim<pre>call foolib#getit()</pre>
pack/foo/start/lib/autoload/foolib.vim<pre>func foolib#getit()</pre>
This works, because start packages will be searched for autoload files, when
sourcing the plugins.

</div>
<div class="help-para">
<h2 id="_plugin-manager" class="help-heading">Plugin manager<span class="help-heading-tags">                                                      <span id="vim.pack" class="help-tag"><a href="#vim.pack">vim.pack</a></span></h2>


</div>
<div class="help-para">
Install, update, and delete external plugins.<b> WARNING:</b> It is still considered
experimental, yet should be stable enough for daily use.

</div>
<div class="help-para">
Manages plugins only in a dedicated <span id="vim.pack-directory" class="help-tag"><a href="#vim.pack-directory">vim.pack-directory</a></span> (see <a href="pack.html#packages">packages</a>):
<code>$XDG_DATA_HOME/nvim/site/pack/core/opt</code>. <code>$XDG_DATA_HOME/nvim/site</code> needs to
be part of <a href="options.html#'packpath'">'packpath'</a>. It usually is, but might not be in cases like <a href="starting.html#--clean">--clean</a>
or setting <a href="starting.html#%24XDG_DATA_HOME">$XDG_DATA_HOME</a> during startup. Plugin's subdirectory name matches
plugin's name in specification. It is assumed that all plugins in the
directory are managed exclusively by <code>vim.pack</code>.

</div>
<div class="help-para">
Uses Git to manage plugins and requires present <code>git</code> executable. Target
plugins should be Git repositories with versions as named tags following
semver convention <code>v&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</code>.

</div>
<div class="help-para">
The latest state of all managed plugins is stored inside a <span id="vim.pack-lockfile" class="help-tag"><a href="#vim.pack-lockfile">vim.pack-lockfile</a></span>
located at <code>$XDG_CONFIG_HOME/nvim/nvim-pack-lock.json</code>. It is a JSON file that
is used to persistently track data about plugins. For a more robust config
treat lockfile like its part: put under version control, etc. In this case all
plugins from the lockfile will be installed at once and at lockfile's revision
(instead of inferring from <code>version</code>). This is done on the very first
<code>vim.pack</code> function call to ensure that lockfile is aligned with what is
actually on the disk. Lockfile should not be edited by hand. Corrupted data
for installed plugins is repaired (including after deleting whole file), but
<code>version</code> fields will be missing for not yet added plugins.

</div>
<div class="help-para">
                                                           <span id="vim.pack-examples" class="help-tag-right"><a href="#vim.pack-examples">vim.pack-examples</a></span><br>

</div>
<div class="help-para">
<div class="help-column_heading">Basic install and management</div>
<div class="help-li" style=""> Add <a href="pack.html#vim.pack.add()">vim.pack.add()</a> call(s) to 'init.lua':
<pre><code class="language-lua">vim.pack.add({
  -- Install "plugin1" and use default branch (usually `main` or `master`)
  'https://github.com/user/plugin1',
  -- Same as above, but using a table (allows setting other options)
  { src = 'https://github.com/user/plugin1' },
  -- Specify plugin's name (here the plugin will be called "plugin2"
  -- instead of "generic-name")
  { src = 'https://github.com/user/generic-name', name = 'plugin2' },
  -- Specify version to follow during install and update
  {
    src = 'https://github.com/user/plugin3',
    -- Version constraint, see |vim.version.range()|
    version = vim.version.range('1.0'),
  },
  {
    src = 'https://github.com/user/plugin4',
    -- Git branch, tag, or commit hash
    version = 'main',
  },
})
-- Plugin's code can be used directly after `add()`
plugin1 = require('plugin1')</code></pre></div>
</div>
<div class="help-para">
<div class="help-li" style=""> Restart Nvim (for example, with <a href="gui.html#%3Arestart">:restart</a>). Plugins that were not yet
  installed will be available on disk after <code>add()</code> call. Their revision is
  taken from <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a> (if present) or inferred from the <code>version</code>.
</div><div class="help-li" style=""> To update all plugins with new changes:
</div><div class="help-li" style="margin-left: 3rem;"> Execute <a href="pack.html#vim.pack.update()">vim.pack.update()</a>. This will download updates from source and
    show confirmation buffer in a separate tabpage.
</div><div class="help-li" style="margin-left: 3rem;"> Review changes. To confirm all updates execute <a href="editing.html#%3Awrite">:write</a>. To discard
    updates execute <a href="editing.html#%3Aquit">:quit</a>.
</div><div class="help-li" style="margin-left: 3rem;"> (Optionally) <a href="gui.html#%3Arestart">:restart</a> to start using code from updated plugins.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Use shorter source</div>

</div>
<div class="help-para">
Create custom Lua helpers:<pre><code class="language-lua">local gh = function(x) return 'https://github.com/' .. x end
local cb = function(x) return 'https://codeberg.org/' .. x end
vim.pack.add({ gh('user/plugin1'), cb('user/plugin2') })</code></pre>

</div>
<div class="help-para">
Another approach is to utilize Git's <code>insteadOf</code> configuration:
<div class="help-li" style=""> <code>git config --global url."https://github.com/".insteadOf "gh:"</code>
</div><div class="help-li" style=""> <code>git config --global url."https://codeberg.org/".insteadOf "cb:"</code>
</div><div class="help-li" style=""> In 'init.lua': <code>vim.pack.add({ 'gh:user/plugin1', 'cb:user/plugin2' })</code>.
  These sources will be used verbatim in <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a>, so reusing the
  config on different machine will require the same Git configuration.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Explore installed plugins</div>
<div class="help-li" style=""> <code>vim.pack.update(nil, { offline = true })</code>
</div><div class="help-li" style=""> Navigate between plugins with <code>[[</code> and <code>]]</code>. List them with <code>gO</code>
  (<a href="lsp.html#vim.lsp.buf.document_symbol()">vim.lsp.buf.document_symbol()</a>).
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Switch plugin's version and/or source</div>
<div class="help-li" style=""> Update 'init.lua' for plugin to have desired <code>version</code> and/or <code>src</code>. Let's
  say, the switch is for plugin named 'plugin1'.
</div><div class="help-li" style=""> <a href="gui.html#%3Arestart">:restart</a>. The plugin's state on disk (revision and/or tracked source) is
  not yet changed. Only plugin's <code>version</code> in <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a> is updated.
</div><div class="help-li" style=""> Execute <code>vim.pack.update({ 'plugin1' })</code>. The plugin's source is updated. If
  only switching version, use <code>{ offline = true }</code> option table.
</div><div class="help-li" style=""> Review changes and either confirm or discard them. If discarded, revert
  <code>version</code> change in 'init.lua' as well or you will be prompted again next
  time you run <a href="pack.html#vim.pack.update()">vim.pack.update()</a>.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Freeze plugin from being updated</div>
<div class="help-li" style=""> Update 'init.lua' for plugin to have <code>version</code> set to current revision. Get
  it from <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a> (plugin's field <code>rev</code>; looks like <code>abc12345</code>).
</div><div class="help-li" style=""> <a href="gui.html#%3Arestart">:restart</a>.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Unfreeze plugin to start receiving updates</div>
<div class="help-li" style=""> Update 'init.lua' for plugin to have <code>version</code> set to whichever version you
  want it to be updated.
</div><div class="help-li" style=""> <a href="gui.html#%3Arestart">:restart</a>.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Revert plugin after an update</div>
<div class="help-li" style=""> Revert the <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a> to the state before the update:
</div><div class="help-li" style="margin-left: 3rem;"> If Git tracked: <code>git checkout HEAD -- nvim-pack-lock.json</code>
</div><div class="help-li" style="margin-left: 3rem;"> If not tracked: examine log file ("nvim-pack.log" at "log" <a href="vimfn.html#stdpath()">stdpath()</a>),
    locate the revisions before the latest update, and (carefully) adjust
    current lockfile to have those revisions.
</div><div class="help-li" style=""> <a href="gui.html#%3Arestart">:restart</a>.
</div><div class="help-li" style=""> <code>vim.pack.update({ 'plugin' }, { offline = true, target = 'lockfile' })</code>.
  Read and confirm.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Synchronize config across machines</div>
<div class="help-li" style=""> On main machine:
</div><div class="help-li" style="margin-left: 3rem;"> Add <a href="pack.html#vim.pack-lockfile">vim.pack-lockfile</a> to VCS.
</div><div class="help-li" style="margin-left: 3rem;"> Push to the remote server.
</div><div class="help-li" style=""> On secondary machine:
</div><div class="help-li" style="margin-left: 3rem;"> Pull from the server.
</div><div class="help-li" style="margin-left: 3rem;"> <a href="gui.html#%3Arestart">:restart</a>. New plugins (not present locally, but present in the lockfile)
    are installed at proper revision.
</div><div class="help-li" style="margin-left: 3rem;"> <code>vim.pack.update(nil, { target = 'lockfile' })</code>. Read and confirm.
</div><div class="help-li" style="margin-left: 3rem;"> Manually delete outdated plugins (present locally, but were not present in
    the lockfile prior to restart) with <code>vim.pack.del( { 'plugin' })</code>. They
    can be located by examining the VCS difference of the lockfile
    (<code>git diff -- nvim-pack-lock.json</code> for Git).
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Remove plugins from disk</div>
<div class="help-li" style=""> Remove plugin specs from <a href="pack.html#vim.pack.add()">vim.pack.add()</a> calls in 'init.lua' or they will
  be reinstalled later.
</div><div class="help-li" style=""> <a href="gui.html#%3Arestart">:restart</a>.
</div><div class="help-li" style=""> Use <a href="pack.html#vim.pack.del()">vim.pack.del()</a> with a list of plugin names to remove. Use
  <a href="pack.html#vim.pack.get()">vim.pack.get()</a> to get all non-active plugins:<pre><code class="language-lua">vim.iter(vim.pack.get())
 :filter(function(x) return not x.active end)
 :map(function(x) return x.spec.name end)
 :totable()</code></pre>
</div>
</div>
<div class="help-para">
                                                             <span id="vim.pack-events" class="help-tag-right"><a href="#vim.pack-events">vim.pack-events</a></span><br>

</div>
<div class="help-para">
Performing actions via <code>vim.pack</code> functions can trigger these events:
<div class="help-li" style=""> <span id="PackChangedPre" class="help-tag"><a href="#PackChangedPre">PackChangedPre</a></span> - before trying to change plugin's state.
</div><div class="help-li" style=""> <span id="PackChanged" class="help-tag"><a href="#PackChanged">PackChanged</a></span> - after plugin's state has changed.
</div>
</div>
<div class="help-para">
Each event populates the following <a href="api.html#event-data">event-data</a> fields:
<div class="help-li" style=""> <code>active</code> - whether plugin was added via <a href="pack.html#vim.pack.add()">vim.pack.add()</a> to current session.
</div><div class="help-li" style=""> <code>kind</code> - one of "install" (install on disk; before loading), "update"
  (update already installed plugin; might be not loaded), "delete" (delete
  from disk).
</div><div class="help-li" style=""> <code>spec</code> - plugin's specification with defaults made explicit.
</div><div class="help-li" style=""> <code>path</code> - full path to plugin's directory.
</div>
</div>
<div class="help-para">
These events can be used to execute plugin hooks. For example:<pre><code class="language-lua">local hooks = function(ev)
  -- Use available |event-data|
  local name, kind = ev.data.spec.name, ev.data.kind
  -- Run build script after plugin's code has changed
  if name == 'plug-1' and (kind == 'install' or kind == 'update') then
    -- Append `:wait()` if you need synchronous execution
    vim.system({ 'make' }, { cwd = ev.data.path })
  end
  -- If action relies on code from the plugin (like user command or
  -- Lua code), make sure to explicitly load it first
  if name == 'plug-2' and kind == 'update' then
    if not ev.data.active then
      vim.cmd.packadd('plug-2')
    end
    vim.cmd('PlugTwoUpdate')
    require('plug2').after_update()
  end
end
-- If hooks need to run on install, run this before `vim.pack.add()`
-- To act on install from lockfile, run before very first `vim.pack.add()`
vim.api.nvim_create_autocmd('PackChanged', { callback = hooks })</code></pre>

</div>
<div class="help-para">
<span id="vim.pack.Spec" class="help-tag"><a href="#vim.pack.Spec">vim.pack.Spec</a></span>

</div>
<div class="help-para">
<div class="help-column_heading">Fields:</div>
<div class="help-li" style=""> <code>{src}</code>       (<code>string</code>) URI from which to install and pull updates. Any
                    format supported by <code>git clone</code> is allowed.
</div><div class="help-li" style=""> <code>{name}?</code>     (<code>string</code>) Name of plugin. Will be used as directory name.
                    Default: <code>src</code> repository name.
</div><div class="help-li" style=""> <code>{version}?</code>  (<code>string|vim.VersionRange</code>) Version to use for install and
                    updates. Can be:
</div><div class="help-li" style="margin-left: 3rem;"> <code>nil</code> (no value, default) to use repository's default
                      branch (usually <code>main</code> or <code>master</code>).
</div><div class="help-li" style="margin-left: 3rem;"> String to use specific branch, tag, or commit hash.
</div><div class="help-li" style="margin-left: 3rem;"> Output of <a href="lua.html#vim.version.range()">vim.version.range()</a> to install the
                      greatest/last semver tag inside the version constraint.
</div><div class="help-li" style=""> <code>{data}?</code>     (<code>any</code>) Arbitrary data associated with a plugin.
</div>
</div>
<div class="help-para">
add(<code>{specs}</code>, <code>{opts}</code>)                                          <span id="vim.pack.add()" class="help-tag-right"><a href="#vim.pack.add()">vim.pack.add()</a></span><br>
    Add plugin to current session
<div class="help-li" style=""> For each specification check that plugin exists on disk in
      <a href="pack.html#vim.pack-directory">vim.pack-directory</a>:
</div><div class="help-li" style="margin-left: 3rem;"> If exists, check if its <code>src</code> is the same as input. If not - delete
        immediately to clean install from the new source. Otherwise do
        nothing.
</div><div class="help-li" style="margin-left: 3rem;"> If doesn't exist, install it by downloading from <code>src</code> into <code>name</code>
        subdirectory (via partial blobless <code>git clone</code>) and update revision to
        match <code>version</code> (via <code>git checkout</code>). Plugin will not be on disk if
        any step resulted in an error.
</div><div class="help-li" style=""> For each plugin execute <a href="repeat.html#%3Apackadd">:packadd</a> (or customizable <code>load</code> function)
      making it reachable by Nvim.
</div>
</div>
<div class="help-para">
<b>    Notes:</b>
<div class="help-li" style=""> Installation is done in parallel, but waits for all to finish before
      continuing next code execution.
</div><div class="help-li" style=""> If plugin is already present on disk, there are no checks about its
      current revision. The specified <code>version</code> can be not the one actually
      present on disk. Execute <a href="pack.html#vim.pack.update()">vim.pack.update()</a> to synchronize.
</div><div class="help-li" style=""> Adding plugin second and more times during single session does nothing:
      only the data from the first adding is registered.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Parameters:</div>
<div class="help-li" style=""> <code>{specs}</code>  (<code>(string|vim.pack.Spec)[]</code>) List of plugin specifications.
                 String item is treated as <code>src</code>.
</div><div class="help-li" style=""> <code>{opts}</code>   (<code>table?</code>) A table with the following fields:
</div><div class="help-li" style="margin-left: 3rem;"> <code>{load}?</code>
                   (<code>boolean|fun(plug_data: {spec: vim.pack.Spec, path: string})</code>)
                   Load <code>plugin/</code> files and <code>ftdetect/</code> scripts. If <code>false</code>,
                   works like <code>:packadd!</code>. If function, called with plugin
                   data and is fully responsible for loading plugin. Default
                   <code>false</code> during <a href="starting.html#init.lua">init.lua</a> sourcing and <code>true</code> afterwards.
</div><div class="help-li" style="margin-left: 3rem;"> <code>{confirm}?</code> (<code>boolean</code>) Whether to ask user to confirm
                   initial install. Default <code>true</code>.
</div>
</div>
<div class="help-para">
del(<code>{names}</code>, <code>{opts}</code>)                                          <span id="vim.pack.del()" class="help-tag-right"><a href="#vim.pack.del()">vim.pack.del()</a></span><br>
    Remove plugins from disk

</div>
<div class="help-para">
<div class="help-column_heading">Parameters:</div>
<div class="help-li" style=""> <code>{names}</code>  (<code>string[]</code>) List of plugin names to remove from disk. Must
                 be managed by <a href="pack.html#vim.pack">vim.pack</a>, not necessarily already added to
                 current session.
</div><div class="help-li" style=""> <code>{opts}</code>   (<code>table?</code>) A table with the following fields:
</div><div class="help-li" style="margin-left: 3rem;"> <code>{force}?</code> (<code>boolean</code>) Whether to allow deleting an active
                   plugin. Default <code>false</code>.
</div>
</div>
<div class="help-para">
get(<code>{names}</code>, <code>{opts}</code>)                                          <span id="vim.pack.get()" class="help-tag-right"><a href="#vim.pack.get()">vim.pack.get()</a></span><br>
    Gets <a href="pack.html#vim.pack">vim.pack</a> plugin info, optionally filtered by <code>names</code>.

</div>
<div class="help-para">
<div class="help-column_heading">Parameters:</div>
<div class="help-li" style=""> <code>{names}</code>  (<code>string[]?</code>) List of plugin names. Default: all plugins
                 managed by <a href="pack.html#vim.pack">vim.pack</a>.
</div><div class="help-li" style=""> <code>{opts}</code>   (<code>table?</code>) A table with the following fields:
</div><div class="help-li" style="margin-left: 3rem;"> <code>{info}</code> (<code>boolean</code>) Whether to include extra plugin info.
                   Default <code>true</code>.
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Return:</div>
        (<code>table[]</code>) A list of objects with the following fields:
<div class="help-li" style=""> <code>{active}</code> (<code>boolean</code>) Whether plugin was added via <a href="pack.html#vim.pack.add()">vim.pack.add()</a>
          to current session.
</div><div class="help-li" style=""> <code>{branches}?</code> (<code>string[]</code>) Available Git branches (first is default).
          Missing if <code>info=false</code>.
</div><div class="help-li" style=""> <code>{path}</code> (<code>string</code>) Plugin's path on disk.
</div><div class="help-li" style=""> <code>{rev}</code> (<code>string</code>) Current Git revision.
</div><div class="help-li" style=""> <code>{spec}</code> (<code>vim.pack.SpecResolved</code>) A <a href="pack.html#vim.pack.Spec">vim.pack.Spec</a> with resolved
          <code>name</code>.
</div><div class="help-li" style=""> <code>{tags}?</code> (<code>string[]</code>) Available Git tags. Missing if <code>info=false</code>.
</div>
</div>
<div class="help-para">
update(<code>{names}</code>, <code>{opts}</code>)                                    <span id="vim.pack.update()" class="help-tag-right"><a href="#vim.pack.update()">vim.pack.update()</a></span><br>
    Update plugins
<div class="help-li" style=""> Download new changes from source.
</div><div class="help-li" style=""> Infer update info (current/target revisions, changelog, etc.).
</div><div class="help-li" style=""> Depending on <code>force</code>:
</div><div class="help-li" style="margin-left: 3rem;"> If <code>false</code>, show confirmation buffer. It lists data about all set to
        update plugins. Pending changes starting with <code>&gt;</code> will be applied
        while the ones starting with <code>&lt;</code> will be reverted. It has dedicated
        buffer-local mappings:
</div><div class="help-li" style="margin-left: 4rem;"> <a href="motion.html#%5D%5D">]]</a> and <a href="motion.html#%5B%5B">[[</a> to navigate through plugin sections.
        Some features are provided via LSP:
</div><div class="help-li" style="margin-left: 4rem;"> 'textDocument/documentSymbol' (<code>gO</code> via <a href="lsp.html#lsp-defaults">lsp-defaults</a> or
          <a href="lsp.html#vim.lsp.buf.document_symbol()">vim.lsp.buf.document_symbol()</a>) - show structure of the buffer.
</div><div class="help-li" style="margin-left: 4rem;"> 'textDocument/hover' (<code>K</code> via <a href="lsp.html#lsp-defaults">lsp-defaults</a> or
          <a href="lsp.html#vim.lsp.buf.hover()">vim.lsp.buf.hover()</a>) - show more information at cursor. Like
          details of particular pending change or newer tag.
</div><div class="help-li" style="margin-left: 4rem;"> 'textDocument/codeAction' (<code>gra</code> via <a href="lsp.html#lsp-defaults">lsp-defaults</a> or
          <a href="lsp.html#vim.lsp.buf.code_action()">vim.lsp.buf.code_action()</a>) - show code actions available for
          "plugin at cursor". Like "delete" (if plugin is not active),
          "update" or "skip updating" (if there are pending updates).
        Execute <a href="editing.html#%3Awrite">:write</a> to confirm update, execute <a href="editing.html#%3Aquit">:quit</a> to discard the
        update.
</div><div class="help-li" style="margin-left: 3rem;"> If <code>true</code>, make updates right away.
</div>
</div>
<div class="help-para">
<b>    Notes:</b>
<div class="help-li" style=""> Every actual update is logged in "nvim-pack.log" file inside "log"
      <a href="vimfn.html#stdpath()">stdpath()</a>.
</div><div class="help-li" style=""> It doesn't update source's default branch if it has changed (like from
      <code>master</code> to <code>main</code>). To have <code>version = nil</code> point to a new default
      branch, re-install the plugin (<a href="pack.html#vim.pack.del()">vim.pack.del()</a> + <a href="pack.html#vim.pack.add()">vim.pack.add()</a>).
</div>
</div>
<div class="help-para">
<div class="help-column_heading">Parameters:</div>
<div class="help-li" style=""> <code>{names}</code>  (<code>string[]?</code>) List of plugin names to update. Must be managed
                 by <a href="pack.html#vim.pack">vim.pack</a>, not necessarily already added to current
                 session. Default: names of all plugins managed by <a href="pack.html#vim.pack">vim.pack</a>.
</div><div class="help-li" style=""> <code>{opts}</code>   (<code>table?</code>) A table with the following fields:
</div><div class="help-li" style="margin-left: 3rem;"> <code>{force}?</code> (<code>boolean</code>) Whether to skip confirmation and make
                   updates immediately. Default <code>false</code>.
</div><div class="help-li" style="margin-left: 3rem;"> <code>{offline}?</code> (<code>boolean</code>) Whether to skip downloading new
                   updates. Default: <code>false</code>.
</div><div class="help-li" style="margin-left: 3rem;"> <code>{target}?</code> (<code>string</code>) How to compute a new plugin revision.
                   One of:
</div><div class="help-li" style="margin-left: 4rem;"> "version" (default) - use latest revision matching
                     <code>version</code> from plugin specification.
</div><div class="help-li" style="margin-left: 4rem;"> "lockfile" - use revision from the lockfile. Useful for
                     reverting or performing controlled update.
</div>
</div>

  </div>
      <div class="col-narrow toc">
      <div><a href="index.html">Main</a></div>
      <div><a href="vimindex.html">Commands index</a></div>
      <div><a href="quickref.html">Quick reference</a></div>
      <hr/>
  <div class="help-toc-h1"><a href="#_using-vim-packages">Using Vim packages</a>
</div><div class="help-toc-h1"><a href="#_creating-vim-packages">Creating Vim packages</a>
</div><div class="help-toc-h1"><a href="#_plugin-manager">Plugin manager</a>
</div></div>
</div>
  <footer>
    <div class="container flex">
      <div class="generator-stats">
        Generated at 2026-02-22 05:54 from <code><a href="https://github.com/neovim/neovim/commit/3f4ef487da80da73f4943d81fb8549c9de70f55f">3f4ef48</a></code>
      </div>
      <div class="generator-stats">
      parse_errors: 0 (<a href="https://github.com/neovim/neovim/issues/new?labels=bug&title=user+docs+HTML%3A+pack.txt+&body=%60gen_help_html.lua%60+problem+at%3A+https://neovim.io/doc/user/pack.html%0D%0DContext%3A%0D%0D%60%60%60%0DTODO%0D%60%60%60" target="_blank">report docs bug...</a>) | <span title="                            Nvim
                            NVIM REFERENCE MANUAL
                                       Type &lt;a href="various.html#gO"&gt;gO&lt;/a&gt; to see the table of contents.">noise_lines: 3</span>
      </div>
    <div>

    <!-- algolia docsearch https://docsearch.algolia.com/docs/docsearch-v3/ -->
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
    <script type="module">
      docsearch({
        container: '#docsearch',
        appId: 'X185E15FPG',
        apiKey: 'b5e6b2f9c636b2b471303205e59832ed',
        indexName: 'nvim',
      });
    </script>

  </footer>
  </body>
</html>
