<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Vim documentation: develop</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.0/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-header">

              <a href="/" class="navbar-brand">
                <img src="/images/logo@2x.png" id="navbar-logo" alt="Neovim">
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <h1>Vim documentation: develop</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="develop.txt"></A><B>develop.txt</B>*


                            NVIM REFERENCE MANUAL



Development of Nvim.					*<A NAME="development"></A><B>development</B>*

1. Design goals		|<A HREF="#design-goals">design-goals</A>|
2. Design decisions	|<A HREF="#design-decisions">design-decisions</A>|

Nvim is open source software.  Everybody is encouraged to contribute.
    https://github.com/neovim/neovim/blob/master/CONTRIBUTING.md

See src/nvim/README.md for a high-level overview of the source code:
    https://github.com/neovim/neovim/blob/master/src/nvim/README.md

==============================================================================

1. Design goals						*<A NAME="design-goals"></A><B>design-goals</B>*

Most important things come first (roughly).

Note that quite a few items are contradicting.  This is intentional.  A
balance must be found between them.



NVIM IS... IMPROVED					*<A NAME="design-improved"></A><B>design-improved</B>*

The IMproved bits of Vim should make <A HREF="motion.html#it">it</A> a better <A HREF="intro.html#Vi">Vi</A>, without becoming a
completely different editor.  Extensions are done with a &quot;<A HREF="intro.html#Vi">Vi</A> spirit&quot;.
- Use the keyboard <A HREF="motion.html#as">as</A> much <A HREF="motion.html#as">as</A> feasible.  The mouse requires a third hand,
  which we don't have.  Many terminals don't have a mouse.
- When the mouse is used anyway, avoid the need to switch back to the
  keyboard.  Avoid mixing mouse and keyboard handling.
- Add commands and <A HREF="options.html#options">options</A> in a consistent way.  Otherwise people will have a
  hard time finding and remembering them.  Keep in mind that more commands and
  <A HREF="options.html#options">options</A> will be added later.
- A feature that people <A HREF="diff.html#do">do</A> not know about is a useless feature.  Don't add
  obscure features, or at least add hints in documentation that they exist.
- Minimize using CTRL and other modifiers, they are more difficult to type.
- There are many first-time and inexperienced Vim users.  Make <A HREF="motion.html#it">it</A> easy for
  them to start using Vim and learn more over time.
- There is no limit to the features that can be added.  Selecting new features
  is one based on (1) what users ask for, (2) how much effort <A HREF="motion.html#it">it</A> takes to
  implement and (3) someone actually implementing <A HREF="motion.html#it">it</A>.



NVIM IS... MULTI PLATFORM				*<A NAME="design-multi-platform"></A><B>design-multi-platform</B>*

Vim tries to help <A HREF="motion.html#as">as</A> many users on <A HREF="motion.html#as">as</A> many platforms <A HREF="motion.html#as">as</A> possible.
- Support many kinds of terminals.  The minimal demands are cursor positioning
  and clear-screen.  Commands should only use key strokes that most keyboards
  have.  Support all the keys on the keyboard for <A HREF="map.html#mapping">mapping</A>.
- Support many platforms.  A condition is that there is someone willing to <A HREF="diff.html#do">do</A>
  Vim <A HREF="#development">development</A> on that platform, and <A HREF="motion.html#it">it</A> doesn't mean messing up the code.
- Support many compilers and libraries.  Not everybody is able or allowed to
  install another compiler or <A HREF="gui.html#GUI">GUI</A> library.
- People switch from one platform to another, and from <A HREF="gui.html#GUI">GUI</A> to terminal
  version.  Features should be present in all versions, or at least in <A HREF="motion.html#as">as</A> many
  <A HREF="motion.html#as">as</A> possible with a reasonable effort.  Try to avoid that users must switch
  between platforms to accomplish their work efficiently.
- That a feature is not possible on some platforms, or only possible on one
  platform, does not mean <A HREF="motion.html#it">it</A> cannot be implemented.  [This intentionally
  contradicts the previous item, these two must be balanced.]



NVIM IS... WELL DOCUMENTED				*<A NAME="design-documented"></A><B>design-documented</B>*

- A feature that isn't documented is a useless feature.  A patch for a new
  feature must include the documentation.
- Documentation should be comprehensive and understandable.  Using examples is
  recommended.
- Don't make the text unnecessarily long.  Less documentation means that an
  item is easier to find.
- Do not prefix doc-tags with &quot;nvim-&quot;. Use |<A HREF="vim_diff.html">vim_diff.txt</A>| to document
  differences from Vim. The {Nvim} annotation is also available
  to <A HREF="motion.html#mark">mark</A> a specific feature. No other distinction is necessary.
- If a feature is removed, delete its doc entry and move its <A HREF="tagsrch.html#tag">tag</A> to
  |<A HREF="vim_diff.html">vim_diff.txt</A>|.



NVIM IS... HIGH SPEED AND SMALL IN SIZE			*<A NAME="design-speed-size"></A><B>design-speed-size</B>*

Using Vim must not be a big attack on system resources.  Keep <A HREF="motion.html#it">it</A> small and
fast.
- Computers are becoming faster and bigger each year.  Vim can grow too, but
  no faster than computers are growing.  Keep Vim usable on older systems.
- Many users start Vim from a shell very often.  Startup time must be short.
- Commands must work efficiently.  The time they consume must be <A HREF="motion.html#as">as</A> small <A HREF="motion.html#as">as</A>
  possible.  Useful commands may take longer.
- Don't forget that some people use Vim over a slow connection.  Minimize the
  communication overhead.
- Vim is a component among other components.  Don't turn <A HREF="motion.html#it">it</A> into a massive
  application, but have <A HREF="motion.html#it">it</A> work well together with other programs.



NVIM IS... MAINTAINABLE					*<A NAME="design-maintain"></A><B>design-maintain</B>*

- The source code should not become a mess.  It should be reliable code.
- Use comments in a useful way!  Quoting the function name and argument names
  is NOT useful.  Do explain what they are for.
- Porting to another platform should be made easy, without having to change
  too much platform-independent code.
- Use the object-oriented spirit: Put data and code together.  Minimize the
  knowledge spread to other parts of the code.



NVIM IS... FLEXIBLE					*<A NAME="design-flexible"></A><B>design-flexible</B>*

Vim should make <A HREF="motion.html#it">it</A> easy for users to work in their preferred styles rather
than coercing its users into particular patterns of work.  This can be for
items with a large impact or for details.  The defaults are carefully chosen
such that most users will enjoy using Vim <A HREF="motion.html#as">as</A> <A HREF="motion.html#it">it</A> is.  Commands and <A HREF="options.html#options">options</A> can
be used to adjust Vim to the desire of the user and its environment.



NVIM IS... NOT						*<A NAME="design-not"></A><B>design-not</B>*

Nvim is not an operating system; instead <A HREF="motion.html#it">it</A> should be composed with other
tools or hosted <A HREF="motion.html#as">as</A> a component. Marvim once said: &quot;Unlike Emacs, Nvim does not
include the kitchen sink... but you can use <A HREF="motion.html#it">it</A> for plumbing.&quot;


==============================================================================

2. Design decisions					*<A NAME="design-decisions"></A><B>design-decisions</B>*


JARGON	 							*<A NAME="dev-jargon"></A><B>dev-jargon</B>*

<B><FONT color="#54A23D">API client </FONT></B>
All external UIs and remote plugins (as opposed to regular Vim plugins) are
&quot;clients&quot; in general; but we call something an &quot;<A HREF="api.html#API">API</A> client&quot; if its purpose is
to abstract or wrap the <A HREF="msgpack_rpc.html#RPC">RPC</A> <A HREF="api.html#API">API</A> for the convenience of other applications
(just like a REST client or SDK such <A HREF="motion.html#as">as</A> boto3 for AWS: you can speak AWS REST
using an HTTP client like curl, but boto3 wraps that in a convenient <A HREF="if_pyth.html#python">python</A>
interface). For example, the Nvim lua-client is an <A HREF="api.html#API">API</A> client:
    https://github.com/neovim/lua-client

<B><FONT color="#54A23D">Host </FONT></B>
A <A HREF="usr_05.html#plugin">plugin</A> &quot;host&quot; is both a client (of the Nvim <A HREF="api.html#API">API</A>) and a server (of an
external platform, e.g. <A HREF="if_pyth.html#python">python</A>). It is a remote <A HREF="usr_05.html#plugin">plugin</A> that hosts other
plugins.

<B><FONT color="#54A23D">Remote plugin </FONT></B>
Arbitrary code registered via |<A HREF="remote_plugin.html#:UpdateRemotePlugins">:UpdateRemotePlugins</A>|, that runs in a separate
process and communicates with Nvim via the |<A HREF="api.html#api">api</A>|.

<B><FONT color="#54A23D">Window </FONT></B>
The <A HREF="motion.html#word">word</A> &quot;<A HREF="windows.html#window">window</A>&quot; is commonly used for several things: A <A HREF="windows.html#window">window</A> on the screen,
the xterm <A HREF="windows.html#window">window</A>, a <A HREF="windows.html#window">window</A> inside Vim to view a buffer.
To avoid confusion, other items that are sometimes called <A HREF="windows.html#window">window</A> have been
given another name.  Here is an overview of the related items:

screen		The whole display.  For the <A HREF="gui.html#GUI">GUI</A> it's something like 1024x768
		pixels.  The Vim shell can use the whole screen or part of <A HREF="motion.html#it">it</A>.
shell		The Vim application.  This can cover the whole screen (e.g.,
		when running in a console) or part of <A HREF="motion.html#it">it</A> (xterm or <A HREF="gui.html#GUI">GUI</A>).
<A HREF="windows.html#window">window</A>		<A HREF="starting.html#View">View</A> on a buffer.  There can be several <A HREF="windows.html#windows">windows</A> in Vim,
		together with the command line, menubar, toolbar, etc. they
		fit in the shell.


PROVIDERS 							*<A NAME="dev-provider"></A><B>dev-provider</B>*

A goal of Nvim is to allow extension of the editor without special knowledge
in the core. But some Vim components are too tightly coupled; in those cases
a &quot;<A HREF="provider.html#provider">provider</A>&quot; hook is exposed.

Consider two examples of integration with external systems that are
implemented in Vim and are now decoupled from Nvim core <A HREF="motion.html#as">as</A> providers:

1. In the Vim source code, <A HREF="provider.html#clipboard">clipboard</A> logic accounts for more than 1k lines of
   C source code (ui.c), to perform two tasks that are now accomplished with
   shell commands such <A HREF="motion.html#as">as</A> xclip or pbcopy/pbpaste.

2. <A HREF="if_pyth.html#Python">Python</A> scripting support: Vim has three files dedicated to embedding the
   <A HREF="if_pyth.html#Python">Python</A> interpreter: if_python.c, if_python3.c and if_py_both.h. Together
   these files sum about 9.5k lines of C source code. In contrast, Nvim <A HREF="if_pyth.html#Python">Python</A>
   scripting is performed by an external host process implemented in ~2k lines
   of <A HREF="if_pyth.html#Python">Python</A>.

Ideally we could implement <A HREF="if_pyth.html#Python">Python</A> and <A HREF="provider.html#clipboard">clipboard</A> integration in pure vimscript
and without touching the C code. But this is infeasible without compromising
backwards compatibility with Vim; that's where providers help.

The <A HREF="provider.html#provider">provider</A> framework helps call vimscript from C. It is composed of two
<A HREF="eval.html#functions">functions</A> in eval.c:

- eval_call_provider(name, method, arguments): calls provider#(name)#Call
  with the method and arguments.
- eval_has_provider(name): Checks if a <A HREF="provider.html#provider">provider</A> is implemented. Returns true
  if the provider#(name)#Call function is implemented. Called by |<A HREF="eval.html#has()">has()</A>|
  (vimscript) to check if features are available.

The provider#(name)#Call function implements integration with an external
system, because shell commands and |<A HREF="msgpack_rpc.html#RPC">RPC</A>| clients are easier to work with in
vimscript.

For example, the <A HREF="if_pyth.html#Python">Python</A> <A HREF="provider.html#provider">provider</A> is implemented by the
autoload/provider/python.vim <A HREF="usr_41.html#script">script</A>; the provider#python#Call function is only
defined if a valid external <A HREF="if_pyth.html#Python">Python</A> host is found. That works well with the
`has('python')` <A HREF="eval.html#expression">expression</A> (normally used by <A HREF="if_pyth.html#Python">Python</A> plugins) because if the
<A HREF="if_pyth.html#Python">Python</A> host isn't installed then the <A HREF="usr_05.html#plugin">plugin</A> will &quot;think&quot; <A HREF="motion.html#it">it</A> is running in
a Vim compiled without the |<A HREF="various.html#+python">+python</A>| feature.



<A HREF="api.html#API">API</A>								*<A NAME="dev-api"></A><B>dev-api</B>*

Use this <A HREF="pattern.html#pattern">pattern</A> to name new <A HREF="api.html#API">API</A> <A HREF="eval.html#functions">functions</A>:
    nvim_{thing}_{action}_{arbitrary-qualifiers}

If the function acts on an object then {thing} is the name of that object
(e.g. &quot;buf&quot; or &quot;win&quot;). If the function operates in a &quot;global&quot; context then
{thing} is usually omitted (but consider &quot;namespacing&quot; your global operations
with a {thing} that groups <A HREF="eval.html#functions">functions</A> under a common concept).

Use existing common {action} names if possible:
    add   Append to, or insert into, a collection
    get   Get a thing (or subset of things by some query)
    set   Set a thing
    del   Delete a thing (or group of things)
    <A HREF="eval.html#list">list</A>  Get all things

Use consistent names for {thing} in all <A HREF="api.html#API">API</A> <A HREF="eval.html#functions">functions</A>. E.g. a buffer is called
&quot;buf&quot; everywhere, not &quot;buffer&quot; in some places and &quot;buf&quot; in others.

Example: `nvim_get_current_line` acts on the global editor state; the common
{action} &quot;get&quot; is used but {thing} is omitted.

Example: `nvim_buf_add_highlight` acts on a `Buffer` object (the first
parameter) and uses the common {action} &quot;add&quot;.

Example: `nvim_list_bufs` operates in a global context (first parameter is
_not_ a Buffer). The common {action} &quot;<A HREF="eval.html#list">list</A>&quot; indicates that <A HREF="motion.html#it">it</A> lists all
bufs (plural) in the global context.


<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun Oct 23 20:08:29 UTC 2016 from <a href="https://github.com/neovim/neovim/commit/fdc48cad7d9fe40ad62a0ba995d088c791bc38ab"><code>fdc48ca</code></a>.
      </div>
    </footer>
  </body>
</html>
