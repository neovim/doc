<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Vim documentation: nvim_terminal_emulator</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.0/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-header">

              <a href="/" class="navbar-brand">
                <img src="/images/logo@2x.png" id="navbar-logo" alt="Neovim">
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <h1>Vim documentation: nvim_terminal_emulator</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="terminal_emulator.txt"></A><B>terminal_emulator.txt</B>*    						{Nvim}


		 NVIM REFERENCE MANUAL    by Thiago de Arruda



Embedded terminal emulator				   *<A NAME="terminal-emulator"></A><B>terminal-emulator</B>*

1. Introduction			|<A HREF="#terminal-emulator-intro">terminal-emulator-intro</A>|
2. Spawning			|<A HREF="#terminal-emulator-spawning">terminal-emulator-spawning</A>|
3. Input			|<A HREF="#terminal-emulator-input">terminal-emulator-input</A>|
4. Configuration		|<A HREF="#terminal-emulator-configuration">terminal-emulator-configuration</A>|
5. Status Variables		|<A HREF="#terminal-emulator-status">terminal-emulator-status</A>|

==============================================================================

1. Introduction					     *<A NAME="terminal-emulator-intro"></A><B>terminal-emulator-intro</B>*

Nvim offers a mostly complete VT220/xterm terminal emulator. The terminal is
presented <A HREF="motion.html#as">as</A> a special buffer type, asynchronously updated to mirror the
virtual terminal display <A HREF="motion.html#as">as</A> data is received from the program connected to <A HREF="motion.html#it">it</A>.
For most purposes, terminal <A HREF="windows.html#buffers">buffers</A> behave a lot like normal <A HREF="windows.html#buffers">buffers</A> with
<A HREF="options.html#'nomodifiable'">'nomodifiable'</A> set.

The implementation is powered by libvterm, a powerful abstract terminal
 emulation library.	<A HREF="http://www.leonerd.org.uk/code/libvterm/">http://www.leonerd.org.uk/code/libvterm/</A>

==============================================================================

2. Spawning					  *<A NAME="terminal-emulator-spawning"></A><B>terminal-emulator-spawning</B>*

There are 3 ways to create a terminal buffer:

- By invoking the |<A HREF="various.html#:terminal">:terminal</A>| ex command.
- By calling the |<A HREF="eval.html#termopen()">termopen()</A>| function.
- By editing a file with a name matching `term://(.{-}//(\d+:)?)?\zs.*`.
  For example:

<B>    :edit term://bash</B>
<B>    :vsplit term://top</B>
 
    Note: The &quot;term://&quot; <A HREF="pattern.html#pattern">pattern</A> is handled by a <A HREF="autocmd.html#BufReadCmd">BufReadCmd</A> handler, so the
    |<A HREF="autocmd.html#autocmd-nested">autocmd-nested</A>| modifier is required to use <A HREF="motion.html#it">it</A> in an autocmd.
<B>        autocmd VimEnter * nested split term://sh</B>
     This is only mentioned for reference; you should use the |<A HREF="various.html#:terminal">:terminal</A>|
    command instead.

When the terminal spawns the program, the buffer will start to mirror the
terminal display and change its name to `term://$CWD//$PID:$COMMAND`.
Note that |<A HREF="starting.html#:mksession">:mksession</A>| will &quot;save&quot; the terminal <A HREF="windows.html#buffers">buffers</A> by restarting all
programs when the session is restored.

==============================================================================

3. Input					     *<A NAME="terminal-emulator-input"></A><B>terminal-emulator-input</B>*

Sending input is possible by entering terminal mode, which is achieved by
pressing any key that would enter insert mode in a normal buffer (|<A HREF="insert.html#i">i</A>| or |<A HREF="insert.html#a">a</A>|
for example). The |<A HREF="various.html#:terminal">:terminal</A>| ex command will automatically enter terminal
mode once it's spawned. While in terminal mode, Nvim will forward all keys to
the underlying program. The only exception is the &lt;C-\&gt;&lt;C-n&gt; key combo,
which will exit back to normal mode.

Terminal mode has its own namespace for mappings, which is accessed with the
&quot;<A HREF="motion.html#t">t</A>&quot; prefix. It's possible to use terminal mappings to customize interaction
with the terminal. For example, here's how to map <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A> to exit terminal mode:

<B>    :tnoremap &lt;Esc&gt; &lt;C-\&gt;&lt;C-n&gt;</B>
 
Navigating to other <A HREF="windows.html#windows">windows</A> is only possible by <A HREF="starting.html#exiting">exiting</A> to normal mode, which
can be cumbersome with &lt;C-\&gt;&lt;C-n&gt; keys. To improve the <A HREF="motion.html#navigation">navigation</A> experience,
you could use the following mappings:

<B>    :tnoremap &lt;A-h&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;h</B>
<B>    :tnoremap &lt;A-j&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;j</B>
<B>    :tnoremap &lt;A-k&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;k</B>
<B>    :tnoremap &lt;A-l&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;l</B>
<B>    :nnoremap &lt;A-h&gt; &lt;C-w&gt;h</B>
<B>    :nnoremap &lt;A-j&gt; &lt;C-w&gt;j</B>
<B>    :nnoremap &lt;A-k&gt; &lt;C-w&gt;k</B>
<B>    :nnoremap &lt;A-l&gt; &lt;C-w&gt;l</B>
 
This configuration allows using `Alt+{h,j,k,l}` to navigate between <A HREF="windows.html#windows">windows</A> no
matter if they are displaying a normal buffer or a terminal buffer in terminal
mode.

Mouse input is also fully supported, and has the following behavior:

- If the program has enabled mouse events, the corresponding events will be
  forwarded to the program.
- If mouse events are disabled (the default), terminal focus will be lost and
  the event will be processed <A HREF="motion.html#as">as</A> in a normal buffer.
- If another <A HREF="windows.html#window">window</A> is clicked, terminal focus will be lost and <A HREF="nvim.html#nvim">nvim</A> will jump
  to the clicked <A HREF="windows.html#window">window</A>
- If the mouse wheel is used while the mouse is positioned in another <A HREF="windows.html#window">window</A>,
  the terminal wont lose focus and the hovered <A HREF="windows.html#window">window</A> will be scrolled.

==============================================================================

4. Configuration			     *<A NAME="terminal-emulator-configuration"></A><B>terminal-emulator-configuration</B>*

Terminal <A HREF="windows.html#buffers">buffers</A> can be customized through the following global/buffer-local
<A HREF="eval.html#variables">variables</A> (set via the |<A HREF="autocmd.html#TermOpen">TermOpen</A>| autocmd):

- `{g,b}:terminal_scrollback_buffer_size`: Scrollback buffer size, between 1
  and 100000 <A HREF="motion.html#inclusive">inclusive</A>. The default is 1000.
- `{g,b}:terminal_color_$NUM`: The terminal color palette, where `$NUM` is the
  color index, between 0 and 255 <A HREF="motion.html#inclusive">inclusive</A>. This setting only affects UIs with
  RGB capabilities; for normal terminals the color index is simply forwarded.

The configuration <A HREF="eval.html#variables">variables</A> are only processed when the terminal starts, which
is why <A HREF="motion.html#it">it</A> needs to be done with the |<A HREF="autocmd.html#TermOpen">TermOpen</A>| autocmd or setting global
<A HREF="eval.html#variables">variables</A> before the terminal is started.

There is also a corresponding |<A HREF="autocmd.html#TermClose">TermClose</A>| event.

The terminal cursor can be highlighted via |<A HREF="syntax.html#hl-TermCursor">hl-TermCursor</A>| and
|<A HREF="syntax.html#hl-TermCursorNC">hl-TermCursorNC</A>|.

==============================================================================

5. Status Variables				    *<A NAME="terminal-emulator-status"></A><B>terminal-emulator-status</B>*

Terminal <A HREF="windows.html#buffers">buffers</A> maintain some information about the terminal in buffer-local
<A HREF="eval.html#variables">variables</A>:


- *<A NAME="b:term_title"></A><B>b:term_title</B>* The settable title of the terminal, typically displayed in
  the <A HREF="windows.html#window">window</A> title or <A HREF="intro.html#tab">tab</A> title of a graphical terminal emulator. Programs
  running in the terminal can set this title via an <A HREF="intro.html#escape">escape</A> sequence.

- *<A NAME="b:terminal_job_id"></A><B>b:terminal_job_id</B>* The <A HREF="nvim.html#nvim">nvim</A> job ID of the job running in the terminal. See
  |<A HREF="job_control.html#job-control">job-control</A>| for more information.

- *<A NAME="b:terminal_job_pid"></A><B>b:terminal_job_pid</B>* The PID of the top-level process running in the
  terminal.

These <A HREF="eval.html#variables">variables</A> will have a value by the time the <A HREF="autocmd.html#TermOpen">TermOpen</A> autocmd runs, and
will continue to have a value for the lifetime of the terminal buffer, making
them suitable for use in <A HREF="options.html#'statusline'">'statusline'</A>. For example, to show the terminal title
<A HREF="motion.html#as">as</A> the status line:

<B>    :autocmd TermOpen * setlocal statusline=%{b:term_title}</B>
 
==============================================================================
<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sun Dec 18 20:08:29 UTC 2016 from <a href="https://github.com/neovim/neovim/commit/aa4ef8966c12a6bd51d31ce32618e9844053aa04"><code>aa4ef89</code></a>.
      </div>
    </footer>
  </body>
</html>
