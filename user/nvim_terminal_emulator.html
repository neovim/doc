<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Vim documentation: nvim_terminal_emulator</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.0/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href="/css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <nav class="navbar">
          <div class="container-fluid">
            <div class="navbar-header">

              <a href="/" class="navbar-brand">
                <img src="/images/logo@2x.png" id="navbar-logo" alt="Neovim">
              </a>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <div class="container">
      <h1>Vim documentation: nvim_terminal_emulator</h1>
<A NAME="top"></A>
<A HREF="index.html">main help file</A>

<HR>
<PRE>

*<A NAME="terminal_emulator.txt"></A><B>terminal_emulator.txt</B>*    						{Nvim}


		 NVIM REFERENCE MANUAL    by Thiago de Arruda



Terminal emulator					   *<A NAME="terminal-emulator"></A><B>terminal-emulator</B>*

Nvim embeds a VT220/xterm terminal emulator based on libvterm. The terminal is
presented <A HREF="motion.html#as">as</A> a special buffer type, asynchronously updated from the virtual
terminal <A HREF="motion.html#as">as</A> data is received from the program connected to <A HREF="motion.html#it">it</A>.

Terminal <A HREF="windows.html#buffers">buffers</A> behave mostly like normal <A HREF="options.html#'nomodifiable'">'nomodifiable'</A> <A HREF="windows.html#buffers">buffers</A>, except:
- Plugins can set <A HREF="options.html#'modifiable'">'modifiable'</A> to modify text, but lines cannot be deleted.
- <A HREF="options.html#'scrollback'">'scrollback'</A> controls how many off-screen lines are kept.
- Terminal output is followed if the cursor is on the last line.

==============================================================================

Spawning					  *<A NAME="terminal-emulator-spawning"></A><B>terminal-emulator-spawning</B>*

There are 3 ways to create a terminal buffer:

- By invoking the |<A HREF="various.html#:terminal">:terminal</A>| ex command.
- By calling the |<A HREF="eval.html#termopen()">termopen()</A>| function.
- By editing a file with a name matching `term://(.{-}//(\d+:)?)?\zs.*`.
  For example:

<B>    :edit term://bash</B>
<B>    :vsplit term://top</B>
 
    Note: The &quot;term://&quot; <A HREF="pattern.html#pattern">pattern</A> is handled by a <A HREF="autocmd.html#BufReadCmd">BufReadCmd</A> handler, so the
    |<A HREF="autocmd.html#autocmd-nested">autocmd-nested</A>| modifier is required to use <A HREF="motion.html#it">it</A> in an autocmd.
<B>        autocmd VimEnter * nested split term://sh</B>
     This is only mentioned for reference; use |<A HREF="various.html#:terminal">:terminal</A>| instead.

When the terminal spawns the program, the buffer will start to mirror the
terminal display and change its name to `term://{cwd}//{pid}:{cmd}`.
The &quot;term://...&quot; scheme enables |<A HREF="starting.html#:mksession">:mksession</A>| to &quot;restore&quot; a terminal buffer by
restarting the {cmd} when the session is loaded.

==============================================================================

Input						     *<A NAME="terminal-emulator-input"></A><B>terminal-emulator-input</B>*

To send input, enter terminal mode using any command that would enter &quot;insert
mode&quot; in a normal buffer, such <A HREF="motion.html#as">as</A> |<A HREF="insert.html#i">i</A>| or |<A HREF="insert.html#:startinsert">:startinsert</A>|. In this mode all keys
except &lt;C-\&gt;&lt;C-N&gt; are sent to the underlying program. Use &lt;C-\&gt;&lt;C-N&gt; to return
to normal mode. |<A HREF="intro.html#CTRL-\_CTRL-N">CTRL-\_CTRL-N</A>|

Terminal mode has its own |<A HREF="map.html#:tnoremap">:tnoremap</A>| namespace for mappings, this can be used
to automate any terminal interaction. To map <A HREF="intro.html#&lt;Esc&gt;">&lt;Esc&gt;</A> to exit terminal mode:
<B>    :tnoremap &lt;Esc&gt; &lt;C-\&gt;&lt;C-n&gt;</B>
 
Navigating to other <A HREF="windows.html#windows">windows</A> is only possible in normal mode. For convenience,
you could use these mappings:
<B>    :tnoremap &lt;A-h&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;h</B>
<B>    :tnoremap &lt;A-j&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;j</B>
<B>    :tnoremap &lt;A-k&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;k</B>
<B>    :tnoremap &lt;A-l&gt; &lt;C-\&gt;&lt;C-n&gt;&lt;C-w&gt;l</B>
<B>    :nnoremap &lt;A-h&gt; &lt;C-w&gt;h</B>
<B>    :nnoremap &lt;A-j&gt; &lt;C-w&gt;j</B>
<B>    :nnoremap &lt;A-k&gt; &lt;C-w&gt;k</B>
<B>    :nnoremap &lt;A-l&gt; &lt;C-w&gt;l</B>
 
Then you can use `Alt+{h,j,k,l}` to navigate between <A HREF="windows.html#windows">windows</A> from any mode.

Mouse input is supported, and has the following behavior:

- If the program has enabled mouse events, the corresponding events will be
  forwarded to the program.
- If mouse events are disabled (the default), terminal focus will be lost and
  the event will be processed <A HREF="motion.html#as">as</A> in a normal buffer.
- If another <A HREF="windows.html#window">window</A> is clicked, terminal focus will be lost and <A HREF="nvim.html#nvim">nvim</A> will jump
  to the clicked <A HREF="windows.html#window">window</A>
- If the mouse wheel is used while the mouse is positioned in another <A HREF="windows.html#window">window</A>,
  the terminal wont lose focus and the hovered <A HREF="windows.html#window">window</A> will be scrolled.

==============================================================================

Configuration				     *<A NAME="terminal-emulator-configuration"></A><B>terminal-emulator-configuration</B>*

Options:		<A HREF="options.html#'scrollback'">'scrollback'</A>
Events:			|<A HREF="autocmd.html#TermOpen">TermOpen</A>|, |<A HREF="autocmd.html#TermClose">TermClose</A>|
Highlight groups:	|<A HREF="syntax.html#hl-TermCursor">hl-TermCursor</A>|, |<A HREF="syntax.html#hl-TermCursorNC">hl-TermCursorNC</A>|

Terminal colors can be customized with these <A HREF="eval.html#variables">variables</A>:

- `{g,b}:terminal_color_$NUM`: The terminal color palette, where `$NUM` is the
  color index, between 0 and 255 <A HREF="motion.html#inclusive">inclusive</A>. This setting only affects UIs with
  RGB capabilities; for normal terminals the color index is simply forwarded.

The `{g,b}:terminal_color_$NUM` <A HREF="eval.html#variables">variables</A> are processed only when the terminal
starts (after |<A HREF="autocmd.html#TermOpen">TermOpen</A>|).

==============================================================================

Status Variables				    *<A NAME="terminal-emulator-status"></A><B>terminal-emulator-status</B>*

Terminal <A HREF="windows.html#buffers">buffers</A> maintain some information about the terminal in buffer-local
<A HREF="eval.html#variables">variables</A>:


- *<A NAME="b:term_title"></A><B>b:term_title</B>* The settable title of the terminal, typically displayed in
  the <A HREF="windows.html#window">window</A> title or <A HREF="intro.html#tab">tab</A> title of a graphical terminal emulator. Programs
  running in the terminal can set this title via an <A HREF="intro.html#escape">escape</A> sequence.

- *<A NAME="b:terminal_job_id"></A><B>b:terminal_job_id</B>* The <A HREF="nvim.html#nvim">nvim</A> job ID of the job running in the terminal. See
  |<A HREF="job_control.html#job-control">job-control</A>| for more information.

- *<A NAME="b:terminal_job_pid"></A><B>b:terminal_job_pid</B>* The PID of the top-level process running in the
  terminal.

These <A HREF="eval.html#variables">variables</A> are initialized before <A HREF="autocmd.html#TermOpen">TermOpen</A>, so you can use them in
a local <A HREF="options.html#'statusline'">'statusline'</A>. Example:
<B>    :autocmd TermOpen * setlocal statusline=%{b:term_title}</B>
 
==============================================================================
<A HREF="#top">top</A> - <A HREF="index.html">main help file</A>
</PRE>
    </div>

    <footer>
      <div class="container">
        Generated Sat Mar  4 01:57:32 UTC 2017 from <a href="https://github.com/neovim/neovim/commit/8bbdef1fd83db623d5b7c5a254cba7a9e2bce99e"><code>8bbdef1</code></a>.
      </div>
    </footer>
  </body>
</html>
