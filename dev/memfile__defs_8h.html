<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Neovim: src/nvim/memfile_defs.h File Reference</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="navbar">
  <div class="container">
    <nav class="site-nav">
      <ul>
        <li><a href="http://neovim.io/">Neovim Home</a></li>
      </ul>
    </nav>
    <a href="index.html">
      <img src="logo-devdoc.png" class="logo" alt="Neovim Dev-Doc">
    </a>
  </div>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bc030da22f6f77ebb27ffd39b609bafa.html">nvim</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">memfile_defs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="types_8h_source.html">nvim/types.h</a>&quot;</code><br />
</div>
<p><a href="memfile__defs_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmf__hashitem.html">mf_hashitem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmf__hashtab.html">mf_hashtab</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbhdr.html">bhdr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmf__blocknr__trans__item.html">mf_blocknr_trans_item</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmemfile.html">memfile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A memory file.  <a href="structmemfile.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a53240c7ae1c7aec6c3dfd72d37c8f63d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a53240c7ae1c7aec6c3dfd72d37c8f63d">MHT_INIT_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:a53240c7ae1c7aec6c3dfd72d37c8f63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial size for a hashtable.  <a href="#a53240c7ae1c7aec6c3dfd72d37c8f63d">More...</a><br /></td></tr>
<tr class="separator:a53240c7ae1c7aec6c3dfd72d37c8f63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada87cdbdb859220ae35f5e2351fb1352"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#ada87cdbdb859220ae35f5e2351fb1352">bh_bnum</a>&#160;&#160;&#160;bh_hashitem.mhi_key</td></tr>
<tr class="memdesc:ada87cdbdb859220ae35f5e2351fb1352"><td class="mdescLeft">&#160;</td><td class="mdescRight">header for hash table and key  <a href="#ada87cdbdb859220ae35f5e2351fb1352">More...</a><br /></td></tr>
<tr class="separator:ada87cdbdb859220ae35f5e2351fb1352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f04cc51224fb39997cd1bd5658c9592"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a8f04cc51224fb39997cd1bd5658c9592">BH_DIRTY</a>&#160;&#160;&#160;1U</td></tr>
<tr class="memdesc:a8f04cc51224fb39997cd1bd5658c9592"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of pages in this block  <a href="#a8f04cc51224fb39997cd1bd5658c9592">More...</a><br /></td></tr>
<tr class="separator:a8f04cc51224fb39997cd1bd5658c9592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad73d453e76c1c4c0e0b154bec1e81a0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#ad73d453e76c1c4c0e0b154bec1e81a0a">BH_LOCKED</a>&#160;&#160;&#160;2U</td></tr>
<tr class="separator:ad73d453e76c1c4c0e0b154bec1e81a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab92990050e32ae3547789c209c810c52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#ab92990050e32ae3547789c209c810c52">nt_old_bnum</a>&#160;&#160;&#160;nt_hashitem.mhi_key</td></tr>
<tr class="memdesc:ab92990050e32ae3547789c209c810c52"><td class="mdescLeft">&#160;</td><td class="mdescRight">header for hash table and key  <a href="#ab92990050e32ae3547789c209c810c52">More...</a><br /></td></tr>
<tr class="separator:ab92990050e32ae3547789c209c810c52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a533663bf2130c33647183f293b1c83e9"><td class="memItemLeft" align="right" valign="top">typedef int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a533663bf2130c33647183f293b1c83e9">blocknr_T</a></td></tr>
<tr class="separator:a533663bf2130c33647183f293b1c83e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6053292ae4cd215b5e49361548b6a8e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmf__hashitem.html">mf_hashitem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#ad6053292ae4cd215b5e49361548b6a8e">mf_hashitem_T</a></td></tr>
<tr class="separator:ad6053292ae4cd215b5e49361548b6a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b5661ebbbdbaa073d3a33ec8caa1a00"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmf__hashtab.html">mf_hashtab</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a4b5661ebbbdbaa073d3a33ec8caa1a00">mf_hashtab_T</a></td></tr>
<tr class="separator:a4b5661ebbbdbaa073d3a33ec8caa1a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07d6289e2ce31a0f27a6d7158699d153"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structbhdr.html">bhdr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a07d6289e2ce31a0f27a6d7158699d153">bhdr_T</a></td></tr>
<tr class="separator:a07d6289e2ce31a0f27a6d7158699d153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c512af4bbdbdc3e3950c0ea0f609baf"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak" />
<a class="el" href="structmf__blocknr__trans__item.html">mf_blocknr_trans_item</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#a7c512af4bbdbdc3e3950c0ea0f609baf">mf_blocknr_trans_item_T</a></td></tr>
<tr class="separator:a7c512af4bbdbdc3e3950c0ea0f609baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad61e1be8425648048c84fa64af7a359d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structmemfile.html">memfile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memfile__defs_8h.html#ad61e1be8425648048c84fa64af7a359d">memfile_T</a></td></tr>
<tr class="memdesc:ad61e1be8425648048c84fa64af7a359d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A memory file.  <a href="#ad61e1be8425648048c84fa64af7a359d">More...</a><br /></td></tr>
<tr class="separator:ad61e1be8425648048c84fa64af7a359d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ada87cdbdb859220ae35f5e2351fb1352"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define bh_bnum&#160;&#160;&#160;bh_hashitem.mhi_key</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>header for hash table and key </p>

</div>
</div>
<a class="anchor" id="a8f04cc51224fb39997cd1bd5658c9592"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BH_DIRTY&#160;&#160;&#160;1U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of pages in this block </p>

</div>
</div>
<a class="anchor" id="ad73d453e76c1c4c0e0b154bec1e81a0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BH_LOCKED&#160;&#160;&#160;2U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a53240c7ae1c7aec6c3dfd72d37c8f63d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MHT_INIT_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initial size for a hashtable. </p>

</div>
</div>
<a class="anchor" id="ab92990050e32ae3547789c209c810c52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define nt_old_bnum&#160;&#160;&#160;nt_hashitem.mhi_key</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>header for hash table and key </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a07d6289e2ce31a0f27a6d7158699d153"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structbhdr.html">bhdr</a>  <a class="el" href="memfile__defs_8h.html#a07d6289e2ce31a0f27a6d7158699d153">bhdr_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A block header.</p>
<p>There is a block header for each previously used block in the memfile.</p>
<p>The block may be linked in the used list OR in the free list. The used blocks are also kept in hash lists.</p>
<p>The used list is a doubly linked list, most recently used block first. The blocks in the used list have a block of memory allocated. mf_used_count is the number of pages in the used list. The hash lists are used to quickly find a block in the used list. The free list is a single linked list, not sorted. The blocks in the free list have no block of memory allocated and the contents of the block in the file (if any) is irrelevant. </p>

</div>
</div>
<a class="anchor" id="a533663bf2130c33647183f293b1c83e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int64_t <a class="el" href="memfile__defs_8h.html#a533663bf2130c33647183f293b1c83e9">blocknr_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A block number.</p>
<p>Blocks numbered from 0 upwards have been assigned a place in the actual file. The block number is equal to the page number in the file. The blocks with negative numbers are currently in memory only. </p>

</div>
</div>
<a class="anchor" id="ad61e1be8425648048c84fa64af7a359d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmemfile.html">memfile</a>  <a class="el" href="memfile__defs_8h.html#ad61e1be8425648048c84fa64af7a359d">memfile_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A memory file. </p>

</div>
</div>
<a class="anchor" id="a7c512af4bbdbdc3e3950c0ea0f609baf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmf__blocknr__trans__item.html">mf_blocknr_trans_item</a>  <a class="el" href="memfile__defs_8h.html#a7c512af4bbdbdc3e3950c0ea0f609baf">mf_blocknr_trans_item_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A block number translation list item.</p>
<p>When a block with a negative number is flushed to the file, it gets a positive number. Because the reference to the block is still the negative number, we remember the translation to the new positive number in the double linked trans lists. The structure is the same as the hash lists. </p>

</div>
</div>
<a class="anchor" id="ad6053292ae4cd215b5e49361548b6a8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmf__hashitem.html">mf_hashitem</a>  <a class="el" href="memfile__defs_8h.html#ad6053292ae4cd215b5e49361548b6a8e">mf_hashitem_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A hash item.</p>
<p>Items' keys are block numbers. Items in the same bucket are organized into a doubly-linked list.</p>
<p>Therefore, items can be arbitrary data structures beginning with pointers for the list and and a block number key. </p>

</div>
</div>
<a class="anchor" id="a4b5661ebbbdbaa073d3a33ec8caa1a00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structmf__hashtab.html">mf_hashtab</a>  <a class="el" href="memfile__defs_8h.html#a4b5661ebbbdbaa073d3a33ec8caa1a00">mf_hashtab_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A chained hashtable with block numbers as keys and arbitrary data structures as items.</p>
<p>This is an intrusive data structure: we require that items begin with mf_hashitem_T which contains the key and linked list pointers. List of items in each bucket is doubly-linked. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<footer>
  <div class="container">
    Generated on Tue Nov 29 2016 20:06:54 for Neovim by
    <a href="http://www.doxygen.org/index.html">Doxygen</a>
    1.8.7
  </div>
</footer>
</body>
</html>
