<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Neovim: src/nvim/hashtab.c File Reference</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="navbar">
  <div class="container">
    <nav class="site-nav">
      <ul>
        <li><a href="http://neovim.io/">Neovim Home</a></li>
      </ul>
    </nav>
    <a href="index.html">
      <img src="logo-devdoc.png" class="logo" alt="Neovim Dev-Doc">
    </a>
  </div>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bc030da22f6f77ebb27ffd39b609bafa.html">nvim</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hashtab.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="assert_8h_source.html">assert.h</a>&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &quot;<a class="el" href="vim_8h_source.html">nvim/vim.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ascii_8h_source.html">nvim/ascii.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hashtab_8h_source.html">nvim/hashtab.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="message_8h_source.html">nvim/message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory_8h_source.html">nvim/memory.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acbe0af651cd5debba0b0662fbb8f9b0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#acbe0af651cd5debba0b0662fbb8f9b0e">PERTURB_SHIFT</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:acbe0af651cd5debba0b0662fbb8f9b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726b0b833926ce83c6f7fd617735852f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a726b0b833926ce83c6f7fd617735852f">HASH_CYCLE_BODY</a>(hash, <a class="el" href="fileio_8c.html#a4c3cc73420e5866312929634a8de9f0e">p</a>)&#160;&#160;&#160;hash = hash * 101 + *<a class="el" href="fileio_8c.html#a4c3cc73420e5866312929634a8de9f0e">p</a>++</td></tr>
<tr class="separator:a726b0b833926ce83c6f7fd617735852f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e75fcb634cc34f2a968e47d1b37381a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a1e75fcb634cc34f2a968e47d1b37381a">hash_init</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>)</td></tr>
<tr class="memdesc:a1e75fcb634cc34f2a968e47d1b37381a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an empty hash table.  <a href="#a1e75fcb634cc34f2a968e47d1b37381a">More...</a><br /></td></tr>
<tr class="separator:a1e75fcb634cc34f2a968e47d1b37381a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82320ef8ee0783629a0cab3a74586b75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a82320ef8ee0783629a0cab3a74586b75">hash_clear</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>)</td></tr>
<tr class="separator:a82320ef8ee0783629a0cab3a74586b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5251f14b08cddddf1e3d1a945ad0106"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#ae5251f14b08cddddf1e3d1a945ad0106">hash_clear_all</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, unsigned int off)</td></tr>
<tr class="separator:ae5251f14b08cddddf1e3d1a945ad0106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd058bcdb0f3b1fe9cf53c18fc838f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a2cd058bcdb0f3b1fe9cf53c18fc838f5">hash_find</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>)</td></tr>
<tr class="separator:a2cd058bcdb0f3b1fe9cf53c18fc838f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc57638d226b8344fbfe0745f1c211b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#adc57638d226b8344fbfe0745f1c211b2">hash_find_len</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, const char *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>, const size_t <a class="el" href="env_8c.html#a20155f62a9a1e814a3207e5bd31f3a72">len</a>)</td></tr>
<tr class="separator:adc57638d226b8344fbfe0745f1c211b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c097bad234ef097aed1e86b9ecf206f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a7c097bad234ef097aed1e86b9ecf206f">hash_lookup</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *const <a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, const char *const <a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>, const size_t key_len, const <a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a> hash)</td></tr>
<tr class="separator:a7c097bad234ef097aed1e86b9ecf206f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76398b14e486db0bcf9bb5276a03ac3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#ae76398b14e486db0bcf9bb5276a03ac3">hash_debug_results</a> (void)</td></tr>
<tr class="separator:ae76398b14e486db0bcf9bb5276a03ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1235e0f7163089ec19df22a8af6d996"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#af1235e0f7163089ec19df22a8af6d996">hash_add</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>)</td></tr>
<tr class="separator:af1235e0f7163089ec19df22a8af6d996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79981c0775e810d062d73d1179d89fd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a79981c0775e810d062d73d1179d89fd6">hash_add_item</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, <a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *hi, <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>, <a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a> hash)</td></tr>
<tr class="separator:a79981c0775e810d062d73d1179d89fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6acdcb55113dfca42811b53109f8b3ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a6acdcb55113dfca42811b53109f8b3ba">hash_remove</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, <a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *hi)</td></tr>
<tr class="separator:a6acdcb55113dfca42811b53109f8b3ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b651de8edaf9d8b6375c63c4106b5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a49b651de8edaf9d8b6375c63c4106b5d">hash_lock</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>)</td></tr>
<tr class="separator:a49b651de8edaf9d8b6375c63c4106b5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb2779e2b1f3393ac14de128717fb3d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#adb2779e2b1f3393ac14de128717fb3d4">hash_unlock</a> (<a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>)</td></tr>
<tr class="separator:adb2779e2b1f3393ac14de128717fb3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc449dfef64837ebc30f226abdfd1a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a3cc449dfef64837ebc30f226abdfd1a1">hash_hash</a> (const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>)</td></tr>
<tr class="separator:a3cc449dfef64837ebc30f226abdfd1a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c7123b9f84bb4f8e080eef300d4a56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#a37c7123b9f84bb4f8e080eef300d4a56">hash_hash_len</a> (const char *<a class="el" href="eval_8c.html#ab1fbd5f7f6655434e39c7091a5a2fd96">key</a>, const size_t <a class="el" href="env_8c.html#a20155f62a9a1e814a3207e5bd31f3a72">len</a>) <a class="el" href="func__attr_8h.html#a5d0503c6e5540d690efe95700dfd0c0e">FUNC_ATTR_PURE</a> <a class="el" href="env_8c.html#a7569e4590e0916dc8a36210e858fbb2f">FUNC_ATTR_WARN_UNUSED_RESULT</a></td></tr>
<tr class="separator:a37c7123b9f84bb4f8e080eef300d4a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03c0073d1eeb2ca7577fcd5dd959414"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#ab03c0073d1eeb2ca7577fcd5dd959414">_hash_key_removed</a> (void)</td></tr>
<tr class="separator:ab03c0073d1eeb2ca7577fcd5dd959414"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe062c6bec386a8eb7d57dbb90497f1c"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8c.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a></td></tr>
<tr class="separator:afe062c6bec386a8eb7d57dbb90497f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handling of a hashtable with Vim-specific properties.</p>
<p>Each item in a hashtable has a NUL terminated string key. A key can appear only once in the table.</p>
<p>A hash number is computed from the key for quick lookup. When the hashes of two different keys point to the same entry an algorithm is used to iterate over other entries in the table until the right one is found. To make the iteration work removed keys are different from entries where a key was never present.</p>
<p>The mechanism has been partly based on how Python Dictionaries are implemented. The algorithm is from Knuth Vol. 3, Sec. 6.4.</p>
<p>The hashtable grows to accommodate more entries when needed. At least 1/3 of the entries is empty to keep the lookup efficient (at the cost of extra memory). </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a726b0b833926ce83c6f7fd617735852f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_CYCLE_BODY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hash, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="fileio_8c.html#a4c3cc73420e5866312929634a8de9f0e">p</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;hash = hash * 101 + *<a class="el" href="fileio_8c.html#a4c3cc73420e5866312929634a8de9f0e">p</a>++</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acbe0af651cd5debba0b0662fbb8f9b0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PERTURB_SHIFT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab03c0073d1eeb2ca7577fcd5dd959414"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a>* _hash_key_removed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to get HI_KEY_REMOVED value</p>
<p>Used for testing because luajit ffi does not allow getting addresses of globals. </p>

</div>
</div>
<a class="anchor" id="af1235e0f7163089ec19df22a8af6d996"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hash_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add item for key "key" to hashtable "ht".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Pointer to the key for the new item. The key has to be contained in the new item (</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>). Must not be <a class="el" href="ops_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>OK if success. FAIL if key already present </dd></dl>

</div>
</div>
<a class="anchor" id="a79981c0775e810d062d73d1179d89fd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_add_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *&#160;</td>
          <td class="paramname"><em>hi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a>&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add item "hi" for key "key" to hashtable "ht".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi</td><td>The hash item to be used. Must have been obtained through <a class="el" href="hashtab_8c.html#a7c097bad234ef097aed1e86b9ecf206f">hash_lookup()</a> and point to an empty item. </td></tr>
    <tr><td class="paramname">key</td><td>Pointer to the key for the new item. The key has to be contained in the new item (</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>). Must not be <a class="el" href="ops_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hash</td><td>The precomputed hash value for the key. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a82320ef8ee0783629a0cab3a74586b75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the array of a hash table without freeing contained values.</p>
<p>If "ht" is not freed (after calling this) then you should call <a class="el" href="hashtab_8c.html#a1e75fcb634cc34f2a968e47d1b37381a" title="Initialize an empty hash table. ">hash_init()</a> right next! </p>

</div>
</div>
<a class="anchor" id="ae5251f14b08cddddf1e3d1a945ad0106"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_clear_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>off</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the array of a hash table and all contained values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">off</td><td>the offset from start of value to start of key (</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>). </dd></dl>

</div>
</div>
<a class="anchor" id="ae76398b14e486db0bcf9bb5276a03ac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_debug_results </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print the efficiency of hashtable lookups.</p>
<p>Useful when trying different hash algorithms. Called when exiting. </p>

</div>
</div>
<a class="anchor" id="a2cd058bcdb0f3b1fe9cf53c18fc838f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>* hash_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find item for given "key" in hashtable "ht".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key of the looked-for item. Must not be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the hash item corresponding to the given key. If not found, then return pointer to the empty item that would be used for that key. WARNING: Returned pointer becomes invalid as soon as the hash table is changed in any way. </dd></dl>

</div>
</div>
<a class="anchor" id="adc57638d226b8344fbfe0745f1c211b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>* hash_find_len </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like hash_find, but key is not NUL-terminated</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ht</td><td>Hashtab to look in. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key of the looked-for item. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Key length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the hash item corresponding to the given key. If not found, then return pointer to the empty item that would be used for that key.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Returned pointer becomes invalid as soon as the hash table is changed in any way. </dd></dl>

</div>
</div>
<a class="anchor" id="a3cc449dfef64837ebc30f226abdfd1a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a> hash_hash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the hash number for a key.</p>
<p>If you think you know a better hash function: Compile with HT_DEBUG set and run a script that uses hashtables a lot. Vim will then print statistics when exiting. Try that with the current hash algorithm and yours. The lower the percentage the better. </p>

</div>
</div>
<a class="anchor" id="a37c7123b9f84bb4f8e080eef300d4a56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a> hash_hash_len </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the hash number for a key that is not a NUL-terminated string</p>
<dl class="section warning"><dt>Warning</dt><dd>Function does not check whether key contains NUL. But you will not be able to get hash entry in this case.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Key length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Key hash. </dd></dl>

</div>
</div>
<a class="anchor" id="a1e75fcb634cc34f2a968e47d1b37381a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an empty hash table. </p>

</div>
</div>
<a class="anchor" id="a49b651de8edaf9d8b6375c63c4106b5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lock hashtable (prevent changes in ht_array).</p>
<p>Don't use this when items are to be added! Must call <a class="el" href="hashtab_8c.html#adb2779e2b1f3393ac14de128717fb3d4">hash_unlock()</a> later. </p>

</div>
</div>
<a class="anchor" id="a7c097bad234ef097aed1e86b9ecf206f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a>* hash_lookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *const&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>key_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a>&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Like <a class="el" href="hashtab_8c.html#a2cd058bcdb0f3b1fe9cf53c18fc838f5">hash_find()</a>, but caller computes "hash".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key of the looked-for item. Must not be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_len</td><td>Key length. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hash</td><td>The precomputed hash for the key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the hashitem corresponding to the given key. If not found, then return pointer to the empty item that would be used for that key. WARNING: Returned pointer becomes invalid as soon as the hash table is changed in any way. </dd></dl>

</div>
</div>
<a class="anchor" id="a6acdcb55113dfca42811b53109f8b3ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a> *&#160;</td>
          <td class="paramname"><em>hi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove item "hi" from hashtable "ht".</p>
<p>Caller must take care of freeing the item itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi</td><td>The hash item to be removed. It must have been obtained with <a class="el" href="hashtab_8c.html#a7c097bad234ef097aed1e86b9ecf206f">hash_lookup()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adb2779e2b1f3393ac14de128717fb3d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hash_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a> *&#160;</td>
          <td class="paramname"><em>ht</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlock hashtable (allow changes in ht_array again).</p>
<p>Table will be resized (shrunk) when necessary. This must balance a call to <a class="el" href="hashtab_8c.html#a49b651de8edaf9d8b6375c63c4106b5d">hash_lock()</a>. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="afe062c6bec386a8eb7d57dbb90497f1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char hash_removed</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic number used for hashitem "hi_key" value indicating a deleted item</p>
<p>Only the address is used. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<footer>
  <div class="container">
    Generated on Sat Mar 4 2017 01:19:15 for Neovim by
    <a href="http://www.doxygen.org/index.html">Doxygen</a>
    1.8.7
  </div>
</footer>
</body>
</html>
