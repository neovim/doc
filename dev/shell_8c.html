<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Neovim: src/nvim/os/shell.c File Reference</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="navbar">
  <div class="container">
    <nav class="site-nav">
      <ul>
        <li><a href="http://neovim.io/">Neovim Home</a></li>
      </ul>
    </nav>
    <a href="index.html">
      <img src="logo-devdoc.png" class="logo" alt="Neovim Dev-Doc">
    </a>
  </div>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bc030da22f6f77ebb27ffd39b609bafa.html">nvim</a></li><li class="navelem"><a class="el" href="dir_9daee82c195cf6c569d041064f8bfb32.html">os</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">shell.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="assert_8h_source.html">assert.h</a>&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;uv.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ascii_8h_source.html">nvim/ascii.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kvec_8h_source.html">nvim/lib/kvec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">nvim/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="loop_8h_source.html">nvim/event/loop.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="libuv__process_8h_source.html">nvim/event/libuv_process.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rstream_8h_source.html">nvim/event/rstream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="shell_8h_source.html">nvim/os/shell.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="os_2signal_8h_source.html">nvim/os/signal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_8h_source.html">nvim/types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">nvim/main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vim_8h_source.html">nvim/vim.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="message_8h_source.html">nvim/message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory_8h_source.html">nvim/memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ui_8h_source.html">nvim/ui.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="screen_8h_source.html">nvim/screen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memline_8h_source.html">nvim/memline.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="option__defs_8h_source.html">nvim/option_defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="charset_8h_source.html">nvim/charset.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="strings_8h_source.html">nvim/strings.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDynamicBuffer.html">DynamicBuffer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a663551b736506cd5dc0ba2c808a99a17"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a663551b736506cd5dc0ba2c808a99a17">DYNAMIC_BUFFER_INIT</a>&#160;&#160;&#160;{ <a class="el" href="ops_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a>, 0, 0 }</td></tr>
<tr class="separator:a663551b736506cd5dc0ba2c808a99a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29fa65deffcd521ccf16fb14b7a8ebe3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a29fa65deffcd521ccf16fb14b7a8ebe3">NS_1_SECOND</a>&#160;&#160;&#160;1000000000U</td></tr>
<tr class="separator:a29fa65deffcd521ccf16fb14b7a8ebe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c3c6f6c175b947eedc9569b526c6979"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a7c3c6f6c175b947eedc9569b526c6979">OUT_DATA_THRESHOLD</a>&#160;&#160;&#160;1024 * 10U</td></tr>
<tr class="separator:a7c3c6f6c175b947eedc9569b526c6979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523eaf5b650f38c307a6aab7f957fa2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a523eaf5b650f38c307a6aab7f957fa2b">MAX_CHUNK_SIZE</a>&#160;&#160;&#160;(<a class="el" href="shell_8c.html#a7c3c6f6c175b947eedc9569b526c6979">OUT_DATA_THRESHOLD</a> / 2)</td></tr>
<tr class="separator:a523eaf5b650f38c307a6aab7f957fa2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a47fb2e24fb7283f86eef63bda916a899"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a47fb2e24fb7283f86eef63bda916a899">shell_build_argv</a> (const char *cmd, const char *extra_args) <a class="el" href="memory_8c.html#aa77008ac38bc6da28fd13edc0a1d3f72">FUNC_ATTR_NONNULL_RET</a> <a class="el" href="func__attr_8h.html#a8b2a9a7ee90d52633d83b8b7dd41a72b">FUNC_ATTR_MALLOC</a></td></tr>
<tr class="separator:a47fb2e24fb7283f86eef63bda916a899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d996002927a165a25250c95795674a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a1d996002927a165a25250c95795674a5">shell_free_argv</a> (char **argv)</td></tr>
<tr class="separator:a1d996002927a165a25250c95795674a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360e8d1add3ef5c50d995ec06513b5f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a360e8d1add3ef5c50d995ec06513b5f6">os_call_shell</a> (<a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *cmd, <a class="el" href="shell_8h.html#a342adb1a4b3f14a94dccedb3f26d9f3a">ShellOpts</a> opts, <a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *extra_args)</td></tr>
<tr class="separator:a360e8d1add3ef5c50d995ec06513b5f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db7238fbdcf53986f4a1b87ad29b7c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="shell_8c.html#a5db7238fbdcf53986f4a1b87ad29b7c7">os_system</a> (char **argv, const char *input, size_t <a class="el" href="env_8c.html#a20155f62a9a1e814a3207e5bd31f3a72">len</a>, char **output, size_t *nread) <a class="el" href="func__attr_8h.html#a7659a7cb26eea6eba1665046d4ae17fe">FUNC_ATTR_NONNULL_ARG</a>(1)</td></tr>
<tr class="separator:a5db7238fbdcf53986f4a1b87ad29b7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a663551b736506cd5dc0ba2c808a99a17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DYNAMIC_BUFFER_INIT&#160;&#160;&#160;{ <a class="el" href="ops_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a>, 0, 0 }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a523eaf5b650f38c307a6aab7f957fa2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CHUNK_SIZE&#160;&#160;&#160;(<a class="el" href="shell_8c.html#a7c3c6f6c175b947eedc9569b526c6979">OUT_DATA_THRESHOLD</a> / 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a29fa65deffcd521ccf16fb14b7a8ebe3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_1_SECOND&#160;&#160;&#160;1000000000U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7c3c6f6c175b947eedc9569b526c6979"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OUT_DATA_THRESHOLD&#160;&#160;&#160;1024 * 10U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a360e8d1add3ef5c50d995ec06513b5f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int os_call_shell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="shell_8h.html#a342adb1a4b3f14a94dccedb3f26d9f3a">ShellOpts</a>&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *&#160;</td>
          <td class="paramname"><em>extra_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calls the user-configured 'shell' (p_sh) for running a command or wildcard expansion.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The command to execute, or NULL to run an interactive shell. </td></tr>
    <tr><td class="paramname">opts</td><td>Options that control how the shell will work. </td></tr>
    <tr><td class="paramname">extra_args</td><td>Extra arguments to the shell, or NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5db7238fbdcf53986f4a1b87ad29b7c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int os_system </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>nread</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>os_system - synchronously execute a command in the shell</p>
<p>example: char *output = NULL; size_t nread = 0; char *argv[] = {"ls", "-la", NULL}; int exitcode = os_sytem(argv, NULL, 0, &amp;output, &amp;nread);</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">argv</td><td>The commandline arguments to be passed to the shell. <code>argv</code> will be consumed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">input</td><td>The input to the shell (NULL for no input), passed to the stdin of the resulting process. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td>The length of the input buffer (not used if <code>input</code> == NULL) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">output</td><td>Pointer to a location where the output will be allocated and stored. Will point to NULL if the shell command did not output anything. If NULL is passed, the shell output will be ignored. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nread</td><td>the number of bytes in the returned buffer (if the returned buffer is not NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the return code of the process, -1 if the process couldn't be started properly </dd></dl>

</div>
</div>
<a class="anchor" id="a47fb2e24fb7283f86eef63bda916a899"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** shell_build_argv </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extra_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds the argument vector for running the user-configured 'shell' (p_sh) with an optional command prefixed by 'shellcmdflag' (p_shcf).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>Command string, or NULL to run an interactive shell. </td></tr>
    <tr><td class="paramname">extra_args</td><td>Extra arguments to the shell, or NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated argument vector. It must be freed with <code>shell_free_argv</code> when no longer needed. </dd></dl>

</div>
</div>
<a class="anchor" id="a1d996002927a165a25250c95795674a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shell_free_argv </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases the memory allocated by <code>shell_build_argv</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argv</td><td>The argument vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<footer>
  <div class="container">
    Generated on Sat Mar 4 2017 02:53:49 for Neovim by
    <a href="http://www.doxygen.org/index.html">Doxygen</a>
    1.8.7
  </div>
</footer>
</body>
</html>
